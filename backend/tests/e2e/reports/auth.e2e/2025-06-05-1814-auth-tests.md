# E2E Test Report: auth-tests

**Date:** 6/5/2025  
**Time:** 6:14:40 PM  
**Duration:** 2.55s  
**Tests:** 7 total, 7 passed, 0 failed  

---

## Test Summary

| Test Case | Status | Duration | Description |
|-----------|--------|----------|-------------|
| ‚úÖ E2E: Auth should register a user | PASSED | 1.53s | E2E: Auth should register a user |
| ‚úÖ E2E: Auth should login user | PASSED | 0.24s | E2E: Auth should login user |
| ‚úÖ E2E: Auth should deny login with wrong credentials | PASSED | 0.32s | E2E: Auth should deny login with wrong credentials |
| ‚úÖ E2E: Auth should access profile with token | PASSED | 0.01s | E2E: Auth should access profile with token |
| ‚úÖ E2E: Auth should deny access to profile without token | PASSED | 0.01s | E2E: Auth should deny access to profile without token |
| ‚úÖ E2E: Auth should login as superadmin | PASSED | 0.37s | E2E: Auth should login as superadmin |
| ‚úÖ E2E: Auth should list users as admin | PASSED | 0.01s | E2E: Auth should list users as admin |


---

## Detailed Execution Log

### Test: E2E: Auth should register a user
**Status:** ‚úÖ PASSED  
**Duration:** 1.53s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/register (1525.1ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1749140078031@example.com",
    "password": "test1234",
    "name": "E2E User"
  }
}
```

**üì• Response:**
```json
{
  "status": 201,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1526",
    "etag": "W/\"5f6-kCwD4W/BU7ZdA2ociZ1Qu8XlZxI\"",
    "date": "Thu, 05 Jun 2025 16:14:39 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "message": "User registered successfully",
    "data": {
      "user": {
        "id": "OrHs1zonm7YR7p2scaJ6QIoAgE82",
        "email": "e2euser_1749140078031@example.com",
        "name": "E2E User",
        "role": "user"
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZlODk1YzQ3YTA0YzVmNmRlMzExMmFmZjE2ODFhMzUwNzdkMWNjZDQiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0OTE0MDA3OCwidXNlcl9pZCI6Ik9ySHMxem9ubTdZUjdwMnNjYUo2UUlvQWdFODIiLCJzdWIiOiJPckhzMXpvbm03WVI3cDJzY2FKNlFJb0FnRTgyIiwiaWF0IjoxNzQ5MTQwMDc4LCJleHAiOjE3NDkxNDM2NzgsImVtYWlsIjoiZTJldXNlcl8xNzQ5MTQwMDc4MDMxQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImUyZXVzZXJfMTc0OTE0MDA3ODAzMUBleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.XFSrT_lMphBnxwPMttLTG8b2hb2i6eXZppCkOjF_Cj5cUWSVxkrrU9GIK_NUeQU5P5HlKjBWNNRIdvlk56ZIRbclOSkuvXsFeieAl8mkhNa5lZe5ZKoEkcx8bWH0mFGgU5MTYsJRJB9fhr19lOD1qCkNJk9qKsM9fwLkjHIfNG5UblqW7DzQnesktSXX1k6LZiTi3ipikawaNM_mLExnBuNsrNph1jTExobiiGohBW4tOCv2fn3-4sD3D_0N6L0-WBw5VFPV-fToYJoyvfvDdgsSETLePQX6dmyLUgIW-YUSsMZIOmLUr2BYKfZAOYNwGzeVlCq3c4_8UHxSvTMF-w",
        "refreshToken": "AMf-vBwjeHk38ClTiVzPBaBEcS8U1uigwsLBKCdC7frDVGGhj51e_VieglyFID-24ZbZJnKOMZ2fo-WFUqu3GHAZ07YKh93ccmIaF9p-xPjMyWa64jJvXxoeuzfOs-mVL6d_KbvLAbMFKVgmEmR7UleB4F-D85A7Zxxj7KNNX4AIl-uxFrxI-zaqKvPH7HDZd7ljbhYAP_a_mfY2zIVTy7JdqaCgn7ccyP7uXdDVq7myvkc20OWNdw4",
        "expiresIn": "3600"
      }
    },
    "messageKey": "auth.user_registered_successfully",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 1525.1 ms  

</details>


---

### Test: E2E: Auth should login user
**Status:** ‚úÖ PASSED  
**Duration:** 0.24s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (235.2ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1749140078031@example.com",
    "password": "test1234"
  }
}
```

**üì• Response:**
```json
{
  "status": 200,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1505",
    "etag": "W/\"5e1-xhRKt1nwN9EB1d0FhBFEgnfTDlA\"",
    "date": "Thu, 05 Jun 2025 16:14:39 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "message": "Login successful",
    "data": {
      "user": {
        "id": "OrHs1zonm7YR7p2scaJ6QIoAgE82",
        "email": "e2euser_1749140078031@example.com",
        "role": "user",
        "isSuperAdmin": false
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZlODk1YzQ3YTA0YzVmNmRlMzExMmFmZjE2ODFhMzUwNzdkMWNjZDQiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0OTE0MDA3OSwidXNlcl9pZCI6Ik9ySHMxem9ubTdZUjdwMnNjYUo2UUlvQWdFODIiLCJzdWIiOiJPckhzMXpvbm03WVI3cDJzY2FKNlFJb0FnRTgyIiwiaWF0IjoxNzQ5MTQwMDc5LCJleHAiOjE3NDkxNDM2NzksImVtYWlsIjoiZTJldXNlcl8xNzQ5MTQwMDc4MDMxQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImUyZXVzZXJfMTc0OTE0MDA3ODAzMUBleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.cDREzKWmTEELZrjfJjh8tG9vgJ0xzzTFz8S6Uq7hVb5Nv1RRt7X8r8LpNxwCooTy77Zmb1jRsQ5haL7kgLO-U-KVUlvndBlPSZpUwr0LTOASL7BOTF6rbzeN8yddDpVU5tpOjaXgSYIJc5xZGfIYN2K45lvQT4fMTm6O5HA-f0EZ6hD4VVjdGcX6qFX24bI_0eNZ57DMr2tiAnLFndHI_-3EkPgiRHRg7obJnLQ7iFnd0oLXWa1AXbnp-WMN9SawOMCtIZosabnpC9n3Ca2wWL5pWDIfyo9fSUwFoTNBFuw4CGZQi_14HxF8TcmcTlXiaAw9yL-5akNHQdjERkoTfQ",
        "refreshToken": "AMf-vBzmWewiAhTz7JcOoTyS7jbbLAfIGqxYdNPZhNCS3yodBjnn52XbZS9ZSgxS21hPgXVAGx9Tzs5oyoY17PL_IugiVPLCC8dBG3qQRaPf-nO399-qWnC9KPkgD5qr9qHaZlVzwnXI8891XSBs3o2DcmUeFlfWAw415Qc_bPgLjnQRVz1GVbkSzGL4gTQB2aT5NX4Lj_k1WMk4zgS3_4ffMrLBwb343Yw3foaud5ei1krKGP4L05Y",
        "expiresIn": "3600"
      }
    },
    "messageKey": "auth.login_successful",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 235.2 ms  

</details>


---

### Test: E2E: Auth should deny login with wrong credentials
**Status:** ‚úÖ PASSED  
**Duration:** 0.32s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (313.2ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1749140078031@example.com",
    "password": "wrongpassword"
  }
}
```

**üì• Response:**
```json
{
  "status": 400,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "155",
    "etag": "W/\"9b-hsr3WjIVstKVjnlCSm6gDhzdmgk\"",
    "date": "Thu, 05 Jun 2025 16:14:40 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": false,
    "error": "Authentication error",
    "details": {
      "details": "INVALID_LOGIN_CREDENTIALS"
    },
    "messageKey": "auth.authentication_error",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 313.2 ms  
**‚ùå Error:** Request failed with status code 400  

</details>


---

### Test: E2E: Auth should access profile with token
**Status:** ‚úÖ PASSED  
**Duration:** 0.01s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/users/me (10.5ms)</summary>

**üì§ Request:**
```json
{
  "headers": {
    "Authorization": "Bearer undefined"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "256",
    "etag": "W/\"100-dPVEpEPLyuYY8iSBRkOcpVPhlvQ\"",
    "date": "Thu, 05 Jun 2025 16:14:40 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token inv√°lido",
    "details": "Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."
  }
}
```

**‚è±Ô∏è Duration:** 10.5 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should deny access to profile without token
**Status:** ‚úÖ PASSED  
**Duration:** 0.01s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/users/me (10.4ms)</summary>

**üì§ Request:**
```json
{}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "34",
    "etag": "W/\"22-a5AGBJ3wo9XYPif6SAp92FOHtH4\"",
    "date": "Thu, 05 Jun 2025 16:14:40 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token no proporcionado"
  }
}
```

**‚è±Ô∏è Duration:** 10.4 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should login as superadmin
**Status:** ‚úÖ PASSED  
**Duration:** 0.37s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (370.9ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "daniellovazzano+2@gmail.com",
    "password": "PC.103638dl"
  }
}
```

**üì• Response:**
```json
{
  "status": 200,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1508",
    "etag": "W/\"5e4-0SN956ZfeYgsrtR2aptNCKRiU/0\"",
    "date": "Thu, 05 Jun 2025 16:14:40 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "message": "Login successful",
    "data": {
      "user": {
        "id": "ipfuAjBzv7WAGK1ASJ2dlxI0RI73",
        "email": "daniellovazzano+2@gmail.com",
        "role": "superadmin",
        "isSuperAdmin": true
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZlODk1YzQ3YTA0YzVmNmRlMzExMmFmZjE2ODFhMzUwNzdkMWNjZDQiLCJ0eXAiOiJKV1QifQ.eyJyb2xlIjoiYWRtaW4iLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0OTE0MDA4MCwidXNlcl9pZCI6ImlwZnVBakJ6djdXQUdLMUFTSjJkbHhJMFJJNzMiLCJzdWIiOiJpcGZ1QWpCenY3V0FHSzFBU0oyZGx4STBSSTczIiwiaWF0IjoxNzQ5MTQwMDgwLCJleHAiOjE3NDkxNDM2ODAsImVtYWlsIjoiZGFuaWVsbG92YXp6YW5vKzJAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImRhbmllbGxvdmF6emFubysyQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.pjBrW4BTs4BQpSUuZJwRWDEkqRrY4AwyBM-DQwc3uOFRi6JV-30NqHcn7cBEQIC1sMxndEt85pIK53upQkjWWTCri42ITESQXF4Eedp4wxbh9H6uokC_Fj4u63q3nufi4kudXe722ta1lc_ihpU1o5TdyfGfwNwRduEBZ1-CXbWF279Qfggcgrp7GIBUbDoj2nyQ26dmwt94KOH3SjPpx0-p9B6wQcQEmS9sQdi1vkQC0epJDubr0Jwqzkl-zLes_znAfLzKYEUSJd8Zq9l40ORNbOKUNxlwV1LGoyPROC6VYT_zEtI5dUctObwIEMOBcq7pY6QX1Y8JS7baue4DyA",
        "refreshToken": "AMf-vByWN9DLt6_ExWBi0ZmCjoQfvLs1Sp8mc0LRH_om7bHhs9f2AF3Fwq8DtFFqrH2MQAIO5GErN5qHFhXsAQ94UBKVq-cvCyrnrJgbRJVuaxVVCYqWuW3vzR-XzGrOM6H157sqUNBq53Lw0JJck6v3brJdAZrLyhSBymb-Y-b6xG3b93vnHvap1IGhb9iIfasoKpdYcxcrSaJOaGjocWFNs8J6vlRqWTiu5tIZOc_8g75clmYiTVQ",
        "expiresIn": "3600"
      }
    },
    "messageKey": "auth.login_successful",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 370.9 ms  

</details>


---

### Test: E2E: Auth should list users as admin
**Status:** ‚úÖ PASSED  
**Duration:** 0.01s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/admin/users (7.7ms)</summary>

**üì§ Request:**
```json
{
  "headers": {
    "Authorization": "Bearer undefined"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "256",
    "etag": "W/\"100-dPVEpEPLyuYY8iSBRkOcpVPhlvQ\"",
    "date": "Thu, 05 Jun 2025 16:14:40 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token inv√°lido",
    "details": "Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."
  }
}
```

**‚è±Ô∏è Duration:** 7.7 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---



---

## Legacy Format (Payloads & Responses)

### Payloads Sent


### Curl Commands


### API Responses


---

## Status & Observations



**Observations:**
Email de usuario: e2euser_1749140078031@example.com. El usuario puede ser eliminado manualmente tras el test si se desea.

---
*Generated automatically by Enhanced E2E Reporter*
