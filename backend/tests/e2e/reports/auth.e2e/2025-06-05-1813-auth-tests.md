# E2E Test Report: auth-tests

**Date:** 6/5/2025  
**Time:** 6:13:38 PM  
**Duration:** 3.38s  
**Tests:** 7 total, 7 passed, 0 failed  

---

## Test Summary

| Test Case | Status | Duration | Description |
|-----------|--------|----------|-------------|
| ‚úÖ E2E: Auth should register a user | PASSED | 2.48s | E2E: Auth should register a user |
| ‚úÖ E2E: Auth should login user | PASSED | 0.25s | E2E: Auth should login user |
| ‚úÖ E2E: Auth should deny login with wrong credentials | PASSED | 0.30s | E2E: Auth should deny login with wrong credentials |
| ‚úÖ E2E: Auth should access profile with token | PASSED | 0.01s | E2E: Auth should access profile with token |
| ‚úÖ E2E: Auth should deny access to profile without token | PASSED | 0.01s | E2E: Auth should deny access to profile without token |
| ‚úÖ E2E: Auth should login as superadmin | PASSED | 0.24s | E2E: Auth should login as superadmin |
| ‚úÖ E2E: Auth should list users as admin | PASSED | 0.02s | E2E: Auth should list users as admin |


---

## Detailed Execution Log

### Test: E2E: Auth should register a user
**Status:** ‚úÖ PASSED  
**Duration:** 2.48s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/register (2474.8ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1749140015137@example.com",
    "password": "test1234",
    "name": "E2E User"
  }
}
```

**üì• Response:**
```json
{
  "status": 201,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1526",
    "etag": "W/\"5f6-3cKZIG3eAIu9Xv16eJpFe8qM0/Q\"",
    "date": "Thu, 05 Jun 2025 16:13:37 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "message": "User registered successfully",
    "data": {
      "user": {
        "id": "q2547NV2SbgA2qRS32OKVsMShvJ2",
        "email": "e2euser_1749140015137@example.com",
        "name": "E2E User",
        "role": "user"
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZlODk1YzQ3YTA0YzVmNmRlMzExMmFmZjE2ODFhMzUwNzdkMWNjZDQiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0OTE0MDAxNSwidXNlcl9pZCI6InEyNTQ3TlYyU2JnQTJxUlMzMk9LVnNNU2h2SjIiLCJzdWIiOiJxMjU0N05WMlNiZ0EycVJTMzJPS1ZzTVNodkoyIiwiaWF0IjoxNzQ5MTQwMDE1LCJleHAiOjE3NDkxNDM2MTUsImVtYWlsIjoiZTJldXNlcl8xNzQ5MTQwMDE1MTM3QGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImUyZXVzZXJfMTc0OTE0MDAxNTEzN0BleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.JXCgaYWJR0pyWm0o2T5a1e_apZ-QLzECJwXRPp0o1HxzCdk_mwjgeuCAQBToxqwraR4Wla1lVv81-piMUCWQvyHdyGpno9dxOZCCUxYRJXDqC63kfDvfgyqUvXc3XXbUyt8ROn3xjR1jo7VLAhwNmXiDYeSYQL4AG5crLMnm12eJ3mR5CBwTi_JJtWizBNOMtyPyHiPPqVK2Hv1t4InHI4o3EjB2OJ3fUhut-eEATCa2cUwmKLJ0oH8AEIR0WhjXm9iMTajOSolMsDcaDrfadJwLoNBnlqQHx067oB0EJuxWt8T0h19GXGIlTo6oYE7cOH6W9ZMcsw1B47XKPjCi6w",
        "refreshToken": "AMf-vByIvESKcJknP80RMgDPe2ZYHj9FRfnI-24sOE9la8XESsHCxQU_e9o2Ps5ARyatFyjOWbwkhikva8wodvxykn4d5AuGaWzaY_NzrxmHs0F4CgtV9w7xWFqp_MaNxO15oC_3kkJaW6DLLQpq_NdlbiVrrxC5JUurrp1m1MS5CDlXYB6opYy5WaYs09JnuTsKPUFbiH8NcEXPpTDG5Du24oLnWfdGRZpSIMsACF-3cYaTVNPJQCA",
        "expiresIn": "3600"
      }
    },
    "messageKey": "auth.user_registered_successfully",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 2474.8 ms  

</details>


---

### Test: E2E: Auth should login user
**Status:** ‚úÖ PASSED  
**Duration:** 0.25s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (253.1ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1749140015137@example.com",
    "password": "test1234"
  }
}
```

**üì• Response:**
```json
{
  "status": 200,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1505",
    "etag": "W/\"5e1-m1C2mP+aM099lxDZH8ProkxKY14\"",
    "date": "Thu, 05 Jun 2025 16:13:37 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "message": "Login successful",
    "data": {
      "user": {
        "id": "q2547NV2SbgA2qRS32OKVsMShvJ2",
        "email": "e2euser_1749140015137@example.com",
        "role": "user",
        "isSuperAdmin": false
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZlODk1YzQ3YTA0YzVmNmRlMzExMmFmZjE2ODFhMzUwNzdkMWNjZDQiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0OTE0MDAxNywidXNlcl9pZCI6InEyNTQ3TlYyU2JnQTJxUlMzMk9LVnNNU2h2SjIiLCJzdWIiOiJxMjU0N05WMlNiZ0EycVJTMzJPS1ZzTVNodkoyIiwiaWF0IjoxNzQ5MTQwMDE3LCJleHAiOjE3NDkxNDM2MTcsImVtYWlsIjoiZTJldXNlcl8xNzQ5MTQwMDE1MTM3QGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImUyZXVzZXJfMTc0OTE0MDAxNTEzN0BleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.alYVFByo4VhcnGdhUlcJUodL_5Ud4j3kR0f4tJNUtal1zLlElIhHVZE3aoNScR0jmPOGJI4d2ku9RaHz1H3Z8ipUjGKbaitC5sYKH3APhK3rj8egtDKkpsxVZ2dz95kMWP6jaJ5EsSumd4QZZISpvg6Yw4I7PMPTnPev0cVjSjomM0_E-EuwRI4g3cTbsfdev-kGMJRaFXH5MFYf1xt8hmqetg_ClHB9hFbVIq91uNw4oySKmShQpmJ2ed4p8r8JO7xWrXcLoAh6132dEhylekWcRcAEKLBft9ADXMZWRLCRYvFa1TR0RbmNQ-IvJgntVFrGVRBgDtI6d0IqCHXU8w",
        "refreshToken": "AMf-vBzhSn9idldxbL2gTCk5exhUfutvwfXMvGDxPjTx6joXXamhJV0mFJSzLI1Ijw_dbZovyxBK3LRU5Evc4wNtlEI78cphA1ycRSnLN8k0OiT_4jgIZ-dtloHCmksFgBgQMmDt4sVs2rNcTFbuCfVnkMJkcKzMv8pbQirc9fo94s982Lh8EIizj2zfpxaFPXk8DZeNqlpsIBfW6NNEsaIdtFWWV-mgyxioB8RqqJ_vHLiM1arvKkA",
        "expiresIn": "3600"
      }
    },
    "messageKey": "auth.login_successful",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 253.1 ms  

</details>


---

### Test: E2E: Auth should deny login with wrong credentials
**Status:** ‚úÖ PASSED  
**Duration:** 0.30s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (299.0ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1749140015137@example.com",
    "password": "wrongpassword"
  }
}
```

**üì• Response:**
```json
{
  "status": 400,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "155",
    "etag": "W/\"9b-hsr3WjIVstKVjnlCSm6gDhzdmgk\"",
    "date": "Thu, 05 Jun 2025 16:13:38 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": false,
    "error": "Authentication error",
    "details": {
      "details": "INVALID_LOGIN_CREDENTIALS"
    },
    "messageKey": "auth.authentication_error",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 299.0 ms  
**‚ùå Error:** Request failed with status code 400  

</details>


---

### Test: E2E: Auth should access profile with token
**Status:** ‚úÖ PASSED  
**Duration:** 0.01s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/users/me (11.2ms)</summary>

**üì§ Request:**
```json
{
  "headers": {
    "Authorization": "Bearer undefined"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "256",
    "etag": "W/\"100-dPVEpEPLyuYY8iSBRkOcpVPhlvQ\"",
    "date": "Thu, 05 Jun 2025 16:13:38 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token inv√°lido",
    "details": "Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."
  }
}
```

**‚è±Ô∏è Duration:** 11.2 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should deny access to profile without token
**Status:** ‚úÖ PASSED  
**Duration:** 0.01s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/users/me (8.3ms)</summary>

**üì§ Request:**
```json
{}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "34",
    "etag": "W/\"22-a5AGBJ3wo9XYPif6SAp92FOHtH4\"",
    "date": "Thu, 05 Jun 2025 16:13:38 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token no proporcionado"
  }
}
```

**‚è±Ô∏è Duration:** 8.3 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should login as superadmin
**Status:** ‚úÖ PASSED  
**Duration:** 0.24s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (241.2ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "daniellovazzano+2@gmail.com",
    "password": "PC.103638dl"
  }
}
```

**üì• Response:**
```json
{
  "status": 200,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1508",
    "etag": "W/\"5e4-8/S78Royy+dZ3q7biBGIcHp2dd0\"",
    "date": "Thu, 05 Jun 2025 16:13:38 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "message": "Login successful",
    "data": {
      "user": {
        "id": "ipfuAjBzv7WAGK1ASJ2dlxI0RI73",
        "email": "daniellovazzano+2@gmail.com",
        "role": "superadmin",
        "isSuperAdmin": true
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjZlODk1YzQ3YTA0YzVmNmRlMzExMmFmZjE2ODFhMzUwNzdkMWNjZDQiLCJ0eXAiOiJKV1QifQ.eyJyb2xlIjoiYWRtaW4iLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0OTE0MDAxOCwidXNlcl9pZCI6ImlwZnVBakJ6djdXQUdLMUFTSjJkbHhJMFJJNzMiLCJzdWIiOiJpcGZ1QWpCenY3V0FHSzFBU0oyZGx4STBSSTczIiwiaWF0IjoxNzQ5MTQwMDE4LCJleHAiOjE3NDkxNDM2MTgsImVtYWlsIjoiZGFuaWVsbG92YXp6YW5vKzJAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImRhbmllbGxvdmF6emFubysyQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.MiKJ1YL71uDTJFzazr8OTYXSnwhr80F5Npz0Yf0LrKDRmYBzA3oAWB313SBI7GdulqXQBKlR8IGaQ2jfL6ujogKgLJ2SiQf-Cu2zIOBbV04QJDHPvj6R3AshbVYSH8ehlB5RbWtFl9OWv1qdIDU10As75kGVutwYhDrQZUwNRIPMjLl27vWsv9DV4T9argdRfvWIcslUe6DGwMHRhjE8h4D7LT9uz5WICcE0RSJtMKixN2w9irFPpvjP0TTkjBLvT9vK71fR8JWeY_gyKCwccVWl_d4iXMV-LPklpo6xAqKzjcdvz4VDoAyc45rEegXebbQXDZRz43dIwqxucXU_yQ",
        "refreshToken": "AMf-vBxshrfy_qA3pHzbGrvIZZyulPsR5arW3fDpUdGd86hpeMOqZJbSou4sLQkz2tEJWpJ8lW0uewaehViZEOskNwgoMsbJeE7A4iettFNiRsTedwHfzKSRFsoRvOQ8j3JRcj1NWM2GCwTKPmuCvsDF-OJjsXNNw_tNCQKllGsuTcffj8fqJCkeZ22PUpJN7wPFESEK4DX4JkbEIs8h43iiTo5DCdIuoeOsInZMu1MOfwc7xRMNhQ4",
        "expiresIn": "3600"
      }
    },
    "messageKey": "auth.login_successful",
    "language": "en"
  }
}
```

**‚è±Ô∏è Duration:** 241.2 ms  

</details>


---

### Test: E2E: Auth should list users as admin
**Status:** ‚úÖ PASSED  
**Duration:** 0.02s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/admin/users (14.3ms)</summary>

**üì§ Request:**
```json
{
  "headers": {
    "Authorization": "Bearer undefined"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-language": "en",
    "x-supported-languages": "en, es",
    "content-type": "application/json; charset=utf-8",
    "content-length": "256",
    "etag": "W/\"100-dPVEpEPLyuYY8iSBRkOcpVPhlvQ\"",
    "date": "Thu, 05 Jun 2025 16:13:38 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token inv√°lido",
    "details": "Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."
  }
}
```

**‚è±Ô∏è Duration:** 14.3 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---



---

## Legacy Format (Payloads & Responses)

### Payloads Sent


### Curl Commands


### API Responses


---

## Status & Observations



**Observations:**
Email de usuario: e2euser_1749140015137@example.com. El usuario puede ser eliminado manualmente tras el test si se desea.

---
*Generated automatically by Enhanced E2E Reporter*
