# E2E Test Report: auth-tests

**Date:** 6/19/2025  
**Time:** 3:19:36 PM  
**Duration:** 4.43s  
**Tests:** 7 total, 7 passed, 0 failed  

---

## Test Summary

| Test Case | Status | Duration | Description |
|-----------|--------|----------|-------------|
| ‚úÖ E2E: Auth should register a user | PASSED | 3.31s | E2E: Auth should register a user |
| ‚úÖ E2E: Auth should login user | PASSED | 0.31s | E2E: Auth should login user |
| ‚úÖ E2E: Auth should deny login with wrong credentials | PASSED | 0.28s | E2E: Auth should deny login with wrong credentials |
| ‚úÖ E2E: Auth should access profile with token | PASSED | 0.01s | E2E: Auth should access profile with token |
| ‚úÖ E2E: Auth should deny access to profile without token | PASSED | 0.03s | E2E: Auth should deny access to profile without token |
| ‚úÖ E2E: Auth should login as superadmin | PASSED | 0.29s | E2E: Auth should login as superadmin |
| ‚úÖ E2E: Auth should list users as admin | PASSED | 0.03s | E2E: Auth should list users as admin |


---

## Detailed Execution Log

### Test: E2E: Auth should register a user
**Status:** ‚úÖ PASSED  
**Duration:** 3.31s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/register (3302.0ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1750339171800@example.com",
    "password": "test1234",
    "name": "E2E User"
  }
}
```

**üì• Response:**
```json
{
  "status": 201,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1607",
    "etag": "W/\"647-QM5gd08EeF1EfObeX6s9VxoTBcI\"",
    "date": "Thu, 19 Jun 2025 13:19:35 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "data": {
      "user": {
        "id": "aA95prZyXyOhrclQwfJgp0DakjK2",
        "email": "e2euser_1750339171800@example.com",
        "name": "E2E User",
        "role": "user"
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjNiZjA1MzkxMzk2OTEzYTc4ZWM4MGY0MjcwMzM4NjM2NDA2MTBhZGMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc1MDMzOTE3MywidXNlcl9pZCI6ImFBOTVwclp5WHlPaHJjbFF3ZkpncDBEYWtqSzIiLCJzdWIiOiJhQTk1cHJaeVh5T2hyY2xRd2ZKZ3AwRGFraksyIiwiaWF0IjoxNzUwMzM5MTczLCJleHAiOjE3NTAzNDI3NzMsImVtYWlsIjoiZTJldXNlcl8xNzUwMzM5MTcxODAwQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImUyZXVzZXJfMTc1MDMzOTE3MTgwMEBleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.j8Q7TpTUhtfATZsJOHPYL5P58xKUcqhnOM9bPERTtIrEklLXZkzNd8x9ag2gyIrl_mZmWXmeb1CN0TvzqpcicxdcdxTIcLpqwZxs3PrscPbBXw6EsUZFsdUmD1ykNKZQf7TrWsH4cyDL9BQaBqyO2S012aULhTRqG0-5oWCpsHGf3kNtdR_QO6Wte-J2PHgYxt4luwT_hxMJhf1t3XTCcJOat3zBcxb7gHcNb38kO53c9QojMu2-tBo0ksGDHNDMQPA-0eXo2VHIzxUsPfnt5G2kieekI2oketWFTxdMx-SIZqaFQEiKkcJex391AX72KSHV6HCruQI4XiYWluNtJg",
        "refreshToken": "AMf-vByMt9BrUstus33wB91CxPN-_cB4q_VzulZhpDMtwPwSyaoZli-6Ba0JYjMd2RrrFyNDh2iCZOCsTF6p7vjCyLrSFzxDdlauQEoEN2_DN-5bU6J5fZsOzYjZMO9g8sn4c4Sn1NGtw561jycB20NcDVqi7tEOGWzBrsGHWkEYNJgjvqabV1lfdq6Nek0FLMjMigcMryQFycPjZIfPtXi9d9lTw5Zh3FxQuqTHysAAve-Eolrymbw",
        "expiresIn": "3600"
      }
    },
    "message": "auth.register.success ({\"email\":\"e2euser_1750339171800@example.com\"})",
    "meta": {
      "language": "en",
      "timestamp": "2025-06-19T13:19:35.083Z",
      "messageKey": "auth.register.success"
    }
  }
}
```

**‚è±Ô∏è Duration:** 3302.0 ms  

</details>


---

### Test: E2E: Auth should login user
**Status:** ‚úÖ PASSED  
**Duration:** 0.31s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (308.3ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1750339171800@example.com",
    "password": "test1234"
  }
}
```

**üì• Response:**
```json
{
  "status": 200,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1604",
    "etag": "W/\"644-M+AuDCu2sHN0aC7wuIn4eFLEIKE\"",
    "date": "Thu, 19 Jun 2025 13:19:35 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "data": {
      "user": {
        "id": "aA95prZyXyOhrclQwfJgp0DakjK2",
        "email": "e2euser_1750339171800@example.com",
        "role": "user",
        "isSuperAdmin": false
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjNiZjA1MzkxMzk2OTEzYTc4ZWM4MGY0MjcwMzM4NjM2NDA2MTBhZGMiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc1MDMzOTE3NiwidXNlcl9pZCI6ImFBOTVwclp5WHlPaHJjbFF3ZkpncDBEYWtqSzIiLCJzdWIiOiJhQTk1cHJaeVh5T2hyY2xRd2ZKZ3AwRGFraksyIiwiaWF0IjoxNzUwMzM5MTc2LCJleHAiOjE3NTAzNDI3NzYsImVtYWlsIjoiZTJldXNlcl8xNzUwMzM5MTcxODAwQGV4YW1wbGUuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImUyZXVzZXJfMTc1MDMzOTE3MTgwMEBleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.qWUAn1Sla8l_gxGibsCXTDOXH1v9nfDjFOZ8GYS1gu8T65htsEU_3yLW9Wkr035WOQPRWJdgYhYhbZPyR4D51kICmBUNUYD90gZ7bCtGli0RsgE013foP1twJ_nq9VYp9NByD5WLznVBMJQRgPd1b7DjvnIC_7JVEeSEN0NO0ROXzGLbrsRu0F8nNr61ly9WNA01Y1R2wR7yvcrLkU38M2Is8zI39SsS4fIck2x33qkWwuOemCbV9gIz7h-tu4_zUoCHxOIf-yY78-W4logYiy2P9hzbj0PIw_tDqp8ppMjuBJgEmUyGpOddb5c3tIBBLCfrJurqadPuuz4O5HO93w",
        "refreshToken": "AMf-vBwLJmF1h_KvZf1JfH8Vby9wlZvBY06cgQGOLpTcFXx0I1cFHED4VWAEyoFjUaysLla35sPpOch90brZ_mz2bdA71mRhwo12-U-Xm-ErI_whSujRf-cddgJ83xYu2LJ2m9GspzgIeERnAF3QHbcFFmBIBLwPy6tdP_CEjNuRV04qiow7Igc7N76SN-MYrcZlnzTRxNu7qgzQ2j0UPsMuXrsB2tUr6pSdXCFmpHvLbG5QKA91GXs",
        "expiresIn": "3600"
      }
    },
    "message": "auth.login.success ({\"email\":\"e2euser_1750339171800@example.com\"})",
    "meta": {
      "language": "en",
      "timestamp": "2025-06-19T13:19:35.436Z",
      "messageKey": "auth.login.success"
    }
  }
}
```

**‚è±Ô∏è Duration:** 308.3 ms  

</details>


---

### Test: E2E: Auth should deny login with wrong credentials
**Status:** ‚úÖ PASSED  
**Duration:** 0.28s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (274.2ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "e2euser_1750339171800@example.com",
    "password": "wrongpassword"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "217",
    "etag": "W/\"d9-Bk/vXJJ/Rpme9+X9f3ZkbnO7HH4\"",
    "date": "Thu, 19 Jun 2025 13:19:35 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": false,
    "message": "auth.login.authentication_failed",
    "meta": {
      "language": "en",
      "timestamp": "2025-06-19T13:19:35.647Z",
      "firebaseCode": "INVALID_LOGIN_CREDENTIALS",
      "messageKey": "auth.login.authentication_failed"
    }
  }
}
```

**‚è±Ô∏è Duration:** 274.2 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should access profile with token
**Status:** ‚úÖ PASSED  
**Duration:** 0.01s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/users/me (14.4ms)</summary>

**üì§ Request:**
```json
{
  "headers": {
    "Authorization": "Bearer undefined"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "256",
    "etag": "W/\"100-dPVEpEPLyuYY8iSBRkOcpVPhlvQ\"",
    "date": "Thu, 19 Jun 2025 13:19:35 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token inv√°lido",
    "details": "Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."
  }
}
```

**‚è±Ô∏è Duration:** 14.4 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should deny access to profile without token
**Status:** ‚úÖ PASSED  
**Duration:** 0.03s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/users/me (32.8ms)</summary>

**üì§ Request:**
```json
{}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "34",
    "etag": "W/\"22-a5AGBJ3wo9XYPif6SAp92FOHtH4\"",
    "date": "Thu, 19 Jun 2025 13:19:35 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token no proporcionado"
  }
}
```

**‚è±Ô∏è Duration:** 32.8 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---

### Test: E2E: Auth should login as superadmin
**Status:** ‚úÖ PASSED  
**Duration:** 0.29s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: POST http://localhost:3000/api/auth/login (287.0ms)</summary>

**üì§ Request:**
```json
{
  "data": {
    "email": "daniellovazzano+2@gmail.com",
    "password": "PC.103638dl"
  }
}
```

**üì• Response:**
```json
{
  "status": 200,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1601",
    "etag": "W/\"641-femLxQ7rYPRf2zOZuIUepoeC8Mw\"",
    "date": "Thu, 19 Jun 2025 13:19:36 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "success": true,
    "data": {
      "user": {
        "id": "ipfuAjBzv7WAGK1ASJ2dlxI0RI73",
        "email": "daniellovazzano+2@gmail.com",
        "role": "superadmin",
        "isSuperAdmin": true
      },
      "tokens": {
        "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjNiZjA1MzkxMzk2OTEzYTc4ZWM4MGY0MjcwMzM4NjM2NDA2MTBhZGMiLCJ0eXAiOiJKV1QifQ.eyJyb2xlIjoiYWRtaW4iLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc1MDMzOTE3NiwidXNlcl9pZCI6ImlwZnVBakJ6djdXQUdLMUFTSjJkbHhJMFJJNzMiLCJzdWIiOiJpcGZ1QWpCenY3V0FHSzFBU0oyZGx4STBSSTczIiwiaWF0IjoxNzUwMzM5MTc2LCJleHAiOjE3NTAzNDI3NzYsImVtYWlsIjoiZGFuaWVsbG92YXp6YW5vKzJAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7ImVtYWlsIjpbImRhbmllbGxvdmF6emFubysyQGdtYWlsLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.l-Rt2EiSlte2-GqfQVqgItwubA-t889R3ak_PYtrzaxeXIf6lAufUMgvDum9IENS-Fl_-r7hZGJNyuqe6ZGZRIfxzcsGGLNB6ueRKK1txNXQ483cicOnI0QCK7z1cjB1RA-VmYPZsGKWq5TW9QOzQwDmaRXbVQXXkCaM_FcmWckrkLF-31Ka1QxCiWAEeqGqFGlkKP-XoUe1eB4OORS9nue8k-PlSN-LEjiXyGaChFpJTTTxsP4Tv-VWVOMH5d4xvELxYUa3ki5YHtOedw7b8mLirH5fP_VOUOyTdr7IKeycI466TSzECTE_EoSl15imYPhXyZifDr3dW-ij2TFspQ",
        "refreshToken": "AMf-vByL-h3HRDQYu4Udj24JmCe-WWwmU5X_6WT4lLwLNufBJRLBvnGudkZ2V94ulWlQYA1TNt-BYKUbfigPoihuB3en6dU3o9z3YFbcx36WeyL8GCLiy40DhIIZDVY4avQp6ro94kIE4Mn2YGxTlKTtRZJHsYehiAXq71IdtbNmFYNI9G4fNXqU_zJm4Nw5hzv-VGa32ToSFRICuDdUWlgAibZ1uRMjvYspLB1xmX5U-Au9MWYeVeM",
        "expiresIn": "3600"
      }
    },
    "message": "auth.login.success ({\"email\":\"daniellovazzano+2@gmail.com\"})",
    "meta": {
      "language": "en",
      "timestamp": "2025-06-19T13:19:36.056Z",
      "messageKey": "auth.login.success"
    }
  }
}
```

**‚è±Ô∏è Duration:** 287.0 ms  

</details>


---

### Test: E2E: Auth should list users as admin
**Status:** ‚úÖ PASSED  
**Duration:** 0.03s  

#### üåê HTTP Requests & Responses

<details><summary>üì° Request #1: GET http://localhost:3000/api/admin/users (31.1ms)</summary>

**üì§ Request:**
```json
{
  "headers": {
    "Authorization": "Bearer undefined"
  }
}
```

**üì• Response:**
```json
{
  "status": 401,
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "256",
    "etag": "W/\"100-dPVEpEPLyuYY8iSBRkOcpVPhlvQ\"",
    "date": "Thu, 19 Jun 2025 13:19:36 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  },
  "data": {
    "error": "Token inv√°lido",
    "details": "Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token."
  }
}
```

**‚è±Ô∏è Duration:** 31.1 ms  
**‚ùå Error:** Request failed with status code 401  

</details>


---



---

## Legacy Format (Payloads & Responses)

### Payloads Sent


### Curl Commands


### API Responses


---

## Status & Observations



**Observations:**
Email de usuario: e2euser_1750339171800@example.com. El usuario puede ser eliminado manualmente tras el test si se desea.

---
*Generated automatically by Enhanced E2E Reporter*
