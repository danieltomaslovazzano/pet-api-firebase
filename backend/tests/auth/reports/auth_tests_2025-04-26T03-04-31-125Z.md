# Test Report - auth_tests

## Environment
- Node Version: v23.11.0
- Platform: darwin
- API URL: http://localhost:3000
- Timestamp: 2025-04-26T03-04-31-123Z

## Summary
- Total Tests: 8
- Passed: 8
- Failed: 0
- Success Rate: 100.00%

## Endpoints Tested

### auth/register
- Methods: POST
- Total Tests: 4
- Passed: 4
- Failed: 0


### auth/login
- Methods: POST
- Total Tests: 2
- Passed: 2
- Failed: 0


### auth/reset-password
- Methods: POST
- Total Tests: 1
- Passed: 1
- Failed: 0


### auth/logout
- Methods: GET
- Total Tests: 1
- Passed: 1
- Failed: 0


## Detailed Analysis

### User Registration Tests

#### Register with valid data
- Status: 201
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/register",
  "data": {
    "email": "test1745636666424@example.com",
    "password": "Test123456!",
    "name": "Test User"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1191",
    "etag": "W/\"4a7-sjWH7i3MOOoezyrxwU4+651P5ys\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 201,
  "data": {
    "message": "Usuario registrado correctamente",
    "user": {
      "id": "bzU7jnjDRNbi7agleL8pa3QyvIl2",
      "email": "test1745636666424@example.com",
      "name": "Test User",
      "role": "user",
      "createdAt": {},
      "updatedAt": {}
    },
    "tokens": {
      "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjkwOTg1NzhjNDg4MWRjMDVlYmYxOWExNWJhMjJkOGZkMWFiMzRjOGEiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0NTYzNjY2NywidXNlcl9pZCI6ImJ6VTdqbmpEUk5iaTdhZ2xlTDhwYTNReXZJbDIiLCJzdWIiOiJielU3am5qRFJOYmk3YWdsZUw4cGEzUXl2SWwyIiwiaWF0IjoxNzQ1NjM2NjY3LCJleHAiOjE3NDU2NDAyNjcsImVtYWlsIjoidGVzdDE3NDU2MzY2NjY0MjRAZXhhbXBsZS5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsidGVzdDE3NDU2MzY2NjY0MjRAZXhhbXBsZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.LeX87j1-6xNjuLtaWJ59VZxRID_trxQfhZXRUrdz1b2bUGpKLnCr9AYSFW6laGZvaGNrD9YArulFmvToXae9DtzK1cMUNSJYLIHTSHyFQHmJzqUtwW-w8qTkSRdwDev_GKKiAMoLOq85Mr7bt-d6V4crwT-zI0jS8G_ufDgkycKA5Zrmfd3HSbv34uxzZMDYm3r0nnCERHcwecFRLP0zxJkJJ44FGmlUT4AHAtGinxyWuK1U5DHbBePpX9EwvNMRoJIkdoIreY5JY7HkEZ1yDNkqTYQKKCx54ubzh3nG1ZNxMGNaK2eZlCqKi6qGDPjwnlzm_53QZ6qasjozGuKOfA",
      "expiresIn": 3600
    }
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1191",
    "etag": "W/\"4a7-sjWH7i3MOOoezyrxwU4+651P5ys\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


#### Register with invalid email
- Status: 400
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/register",
  "data": {
    "email": "invalid-email",
    "password": "Test123456!",
    "name": "Test User"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "38",
    "etag": "W/\"26-a2KtX56nN9d92pNRP+9lzUo4Qkc\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 400,
  "data": {
    "error": "Formato de email inválido"
  },
  "error": "Request failed with status code 400",
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "38",
    "etag": "W/\"26-a2KtX56nN9d92pNRP+9lzUo4Qkc\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


#### Register with weak password
- Status: 400
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/register",
  "data": {
    "email": "test1745636669201@example.com",
    "password": "123",
    "name": "Test User"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "59",
    "etag": "W/\"3b-bm1FhnjpnP+uQHC7fKC+FJKgbOw\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 400,
  "data": {
    "error": "La contraseña debe tener al menos 6 caracteres"
  },
  "error": "Request failed with status code 400",
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "59",
    "etag": "W/\"3b-bm1FhnjpnP+uQHC7fKC+FJKgbOw\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


#### Register with missing fields
- Status: 400
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/register",
  "data": {
    "email": "test1745636669219@example.com"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "65",
    "etag": "W/\"41-cBg7B6HGrqcvr6qG/tjfU7cjOAE\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 400,
  "data": {
    "error": "Se requieren todos los campos: email, password y name"
  },
  "error": "Request failed with status code 400",
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "65",
    "etag": "W/\"41-cBg7B6HGrqcvr6qG/tjfU7cjOAE\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


### User Login Tests

#### Login with valid credentials
- Status: 200
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/login",
  "data": {
    "email": "test1745636666424@example.com",
    "password": "Test123456!"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1523",
    "etag": "W/\"5f3-CZRJtXQH/TXLdQHO+4I/Nz/8Nyw\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "user": {
      "id": "bzU7jnjDRNbi7agleL8pa3QyvIl2",
      "email": "test1745636666424@example.com",
      "name": "Test User",
      "role": "user",
      "createdAt": {
        "_seconds": 1745636668,
        "_nanoseconds": 339000000
      },
      "updatedAt": {
        "_seconds": 1745636668,
        "_nanoseconds": 339000000
      }
    },
    "tokens": {
      "idToken": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjkwOTg1NzhjNDg4MWRjMDVlYmYxOWExNWJhMjJkOGZkMWFiMzRjOGEiLCJ0eXAiOiJKV1QifQ.eyJyb2xlIjoidXNlciIsImlzcyI6Imh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS9wZXQtYXBpLWRldi0zNTExNSIsImF1ZCI6InBldC1hcGktZGV2LTM1MTE1IiwiYXV0aF90aW1lIjoxNzQ1NjM2NjY5LCJ1c2VyX2lkIjoiYnpVN2puakRSTmJpN2FnbGVMOHBhM1F5dklsMiIsInN1YiI6ImJ6VTdqbmpEUk5iaTdhZ2xlTDhwYTNReXZJbDIiLCJpYXQiOjE3NDU2MzY2NjksImV4cCI6MTc0NTY0MDI2OSwiZW1haWwiOiJ0ZXN0MTc0NTYzNjY2NjQyNEBleGFtcGxlLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjpmYWxzZSwiZmlyZWJhc2UiOnsiaWRlbnRpdGllcyI6eyJlbWFpbCI6WyJ0ZXN0MTc0NTYzNjY2NjQyNEBleGFtcGxlLmNvbSJdfSwic2lnbl9pbl9wcm92aWRlciI6InBhc3N3b3JkIn19.MaAG2WeYLWeGwKhdzVUdrTu1vlxkAiTMV3y6srz2pmkCMTlq8Jsx2oc6bz8_k8Xg_bpUxGhhGjyGeSWyAPkGpl7CRCEkiNbbeNpY6STF0wy6_bsC1_mTERRRF9D146BPTHNXn4fGtoobpE6uGY4NVXBMKjYwTFswAJrFLLr6qzd8d43azVPWxjaMwUDB8UNx6ugTocRUkLahVzURUclEKHHEM7BRmHZcq64w5Uo2AXGZeqpq0g2lEGq0LeGuTPZDtXI-i279a9EJeWZ9bBbpr3C6woPNBpngguzUB5G30qlGz6kEX1AsaOxMNCTj_FvOiyNV2MUXMbW7Z5l0at7KPg",
      "refreshToken": "AMf-vBxBCM4XweJJ_lni19ImluATIt387zHSMcZrS7fJNyQ70H9trjALAYEYk_y0IaoWHQUiJFw-xWFUu1goDXtNhQ1QpNp6gbR8iTXmHI3lV_My9UfX-JNmHtcioTyru-8sTPE_IWdR5c5eor2YbVOXZRw-tbTufH8bkRucCfaIHX57kMkIkPQAuiIE8PYvwc4Ya5juLM8KheMfZogqsGJgTm2GQE9updVVtRDzH-1R1V1YDrT-5ok",
      "expiresIn": "3600"
    }
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "1523",
    "etag": "W/\"5f3-CZRJtXQH/TXLdQHO+4I/Nz/8Nyw\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


#### Login with invalid password
- Status: 400
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/login",
  "data": {
    "email": "test1745636666424@example.com",
    "password": "wrongpassword"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "73",
    "etag": "W/\"49-jL22qI9XzW7ZXzyHTnJcavz1C9o\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 400,
  "data": {
    "error": "Error de autenticación",
    "details": "INVALID_LOGIN_CREDENTIALS"
  },
  "error": "Request failed with status code 400",
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "73",
    "etag": "W/\"49-jL22qI9XzW7ZXzyHTnJcavz1C9o\"",
    "date": "Sat, 26 Apr 2025 03:04:29 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


### Password Reset Tests

#### Request password reset with valid email
- Status: 200
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "POST",
  "endpoint": "auth/reset-password",
  "data": {
    "email": "test1745636666424@example.com"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "59",
    "etag": "W/\"3b-7+XrS/J3yfz/aqsO15MxUS0GD0g\"",
    "date": "Sat, 26 Apr 2025 03:04:30 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "message": "Correo de recuperación enviado correctamente"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "59",
    "etag": "W/\"3b-7+XrS/J3yfz/aqsO15MxUS0GD0g\"",
    "date": "Sat, 26 Apr 2025 03:04:30 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


### Logout Tests

#### Logout with valid token
- Status: 200
- Analysis: ✅ Expected behavior
- Request:
```json
{
  "method": "GET",
  "endpoint": "auth/logout",
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "43",
    "etag": "W/\"2b-MyejiszC7Gtv4lyEuC93gc43Iqk\"",
    "date": "Sat, 26 Apr 2025 03:04:31 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "message": "Sesión cerrada correctamente"
  },
  "headers": {
    "x-powered-by": "Express",
    "vary": "Origin",
    "content-type": "application/json; charset=utf-8",
    "content-length": "43",
    "etag": "W/\"2b-MyejiszC7Gtv4lyEuC93gc43Iqk\"",
    "date": "Sat, 26 Apr 2025 03:04:31 GMT",
    "connection": "keep-alive",
    "keep-alive": "timeout=5"
  }
}
```


## Recommendations
- **CRITICAL**: Overall test success rate is below 80%. Immediate attention required.
- **WARNING**: User Registration test suite has 3 failing tests.
- **WARNING**: User Login test suite has 1 failing tests.
