<html><head><meta charset="utf-8"/><title>Pet API Test Report</title><style type="text/css">html,
body {
  font-family: Arial, Helvetica, sans-serif;
  font-size: 1rem;
  margin: 0;
  padding: 0;
  color: #333;
}
body {
  padding: 2rem 1rem;
  font-size: 0.85rem;
}
.jesthtml-content {
  margin: 0 auto;
  max-width: 70rem;
}
header {
  display: flex;
  align-items: center;
}
#title {
  margin: 0;
  flex-grow: 1;
}
#logo {
  height: 4rem;
}
#timestamp {
  color: #777;
  margin-top: 0.5rem;
}

/** SUMMARY */
#summary {
  color: #333;
  margin: 2rem 0;
  display: flex;
  font-family: monospace;
  font-size: 1rem;
}
#summary > div {
  margin-right: 2rem;
  background: #eee;
  padding: 1rem;
  min-width: 15rem;
}
#summary > div:last-child {
  margin-right: 0;
}
@media only screen and (max-width: 720px) {
  #summary {
    flex-direction: column;
  }
  #summary > div {
    margin-right: 0;
    margin-top: 2rem;
  }
  #summary > div:first-child {
    margin-top: 0;
  }
}

.summary-total {
  font-weight: bold;
  margin-bottom: 0.5rem;
}
.summary-passed {
  color: #4f8a10;
  border-left: 0.4rem solid #4f8a10;
  padding-left: 0.5rem;
}
.summary-failed,
.summary-obsolete-snapshots {
  color: #d8000c;
  border-left: 0.4rem solid #d8000c;
  padding-left: 0.5rem;
}
.summary-pending {
  color: #9f6000;
  border-left: 0.4rem solid #9f6000;
  padding-left: 0.5rem;
}
.summary-empty {
  color: #999;
  border-left: 0.4rem solid #999;
}

.test-result {
  padding: 1rem;
  margin-bottom: 0.25rem;
}
.test-result:last-child {
  border: 0;
}
.test-result.passed {
  background-color: #dff2bf;
  color: #4f8a10;
}
.test-result.failed {
  background-color: #ffbaba;
  color: #d8000c;
}
.test-result.pending {
  background-color: #ffdf61;
  color: #9f6000;
}

.test-info {
  display: flex;
  justify-content: space-between;
}
.test-suitename {
  width: 20%;
  text-align: left;
  font-weight: bold;
  word-break: break-word;
}
.test-title {
  width: 40%;
  text-align: left;
  font-style: italic;
}
.test-status {
  width: 20%;
  text-align: right;
}
.test-duration {
  width: 10%;
  text-align: right;
  font-size: 0.75rem;
}

.failureMessages {
  padding: 0 1rem;
  margin-top: 1rem;
  border-top: 1px dashed #d8000c;
}
.failureMessages.suiteFailure {
  border-top: none;
}
.failureMsg {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}

.suite-container {
  margin-bottom: 2rem;
}
.suite-container > input[type="checkbox"] {
  position: absolute;
  left: -100vw;
}
.suite-container label {
  display: block;
}
.suite-container .suite-tests {
  overflow-y: hidden;
  height: 0;
}
.suite-container > input[type="checkbox"]:checked ~ .suite-tests {
  height: auto;
  overflow: visible;
}
.suite-info {
  padding: 1rem;
  background-color: #eee;
  color: #777;
  display: flex;
  align-items: center;
  margin-bottom: 0.25rem;
}
.suite-info:hover {
  background-color: #ddd;
  cursor: pointer;
}
.suite-info .suite-path {
  word-break: break-all;
  flex-grow: 1;
  font-family: monospace;
  font-size: 1rem;
}
.suite-info .suite-time {
  margin-left: 0.5rem;
  padding: 0.2rem 0.3rem;
  font-size: 0.75rem;
}
.suite-info .suite-time.warn {
  background-color: #d8000c;
  color: #fff;
}
.suite-info:before {
  content: "\2303";
  display: inline-block;
  margin-right: 0.5rem;
  transform: rotate(0deg);
}
.suite-container > input[type="checkbox"]:checked ~ label .suite-info:before {
  transform: rotate(180deg);
}

/* CONSOLE LOGS */
.suite-consolelog {
  margin-bottom: 0.25rem;
  padding: 1rem;
  background-color: #efefef;
}
.suite-consolelog-header {
  font-weight: bold;
}
.suite-consolelog-item {
  padding: 0.5rem;
}
.suite-consolelog-item pre {
  margin: 0.5rem 0;
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}
.suite-consolelog-item-origin {
  color: #777;
  font-weight: bold;
}
.suite-consolelog-item-message {
  color: #000;
  font-size: 1rem;
  padding: 0 0.5rem;
}

/* OBSOLETE SNAPSHOTS */
.suite-obsolete-snapshots {
  margin-bottom: 0.25rem;
  padding: 1rem;
  background-color: #ffbaba;
  color: #d8000c;
}
.suite-obsolete-snapshots-header {
  font-weight: bold;
}
.suite-obsolete-snapshots-item {
  padding: 0.5rem;
}
.suite-obsolete-snapshots-item pre {
  margin: 0.5rem 0;
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  word-wrap: break-word;
}
.suite-obsolete-snapshots-item-message {
  color: #000;
  font-size: 1rem;
  padding: 0 0.5rem;
}
</style></head><body><div class="jesthtml-content"><header><h1 id="title">Pet API Test Report</h1></header><div id="metadata-container"><div id="timestamp">Started: 2025-05-05 16:14:37</div><div id="summary"><div id="suite-summary"><div class="summary-total">Suites (10)</div><div class="summary-passed ">7 passed</div><div class="summary-failed ">3 failed</div><div class="summary-pending  summary-empty">0 pending</div></div><div id="test-summary"><div class="summary-total">Tests (106)</div><div class="summary-passed ">100 passed</div><div class="summary-failed ">6 failed</div><div class="summary-pending  summary-empty">0 pending</div></div></div></div><div id="suite-1" class="suite-container"><input id="collapsible-0" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-0"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/unit/authentication.test.js</div><div class="suite-time">2.212s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should pass with valid token</div><div class="test-status">passed</div><div class="test-duration">0.018s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle missing authorization header</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle invalid token format</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle token verification failure</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle token expired error</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle disabled user account</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle missing user data in Firestore</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Middleware</div><div class="test-title">should handle unexpected errors</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div></div></div><div id="suite-2" class="suite-container"><input id="collapsible-1" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-1"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/unit/authorization.test.js</div><div class="suite-time">2.291s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should call next() for allowed resource/action</div><div class="test-status">passed</div><div class="test-duration">0.101s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should return 401 if user is not authenticated</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should return 403 if permission is denied</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should return 500 if there is an unexpected error</div><div class="test-status">passed</div><div class="test-duration">0.028s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should return 400 if there is a validation error</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should return 404 if the resource is not found</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authorization Middleware</div><div class="test-title">should throw an error if resource or action is not provided</div><div class="test-status">passed</div><div class="test-duration">0.01s</div></div></div></div></div><div id="suite-3" class="suite-container"><input id="collapsible-2" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-2"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js</div><div class="suite-time">2.46s</div></div></label><div class="suite-tests"><div class="test-result failed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; isOrgAdmin condition</div><div class="test-title">should return true for user with org admin role</div><div class="test-status">failed</div><div class="test-duration">0.007s</div></div><div class="failureMessages"> <pre class="failureMsg">TypeError: evaluateCondition is not a function
    at Object.evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:85:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; isOrgAdmin condition</div><div class="test-title">should return true for user with admin permission</div><div class="test-status">failed</div><div class="test-duration">0.003s</div></div><div class="failureMessages"> <pre class="failureMsg">TypeError: evaluateCondition is not a function
    at Object.evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:97:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; isOrgAdmin condition</div><div class="test-title">should return false for regular member</div><div class="test-status">failed</div><div class="test-duration">0.001s</div></div><div class="failureMessages"> <pre class="failureMsg">TypeError: evaluateCondition is not a function
    at Object.evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; isOrgAdmin condition</div><div class="test-title">should return false if no orgId is provided</div><div class="test-status">failed</div><div class="test-duration">0s</div></div><div class="failureMessages"> <pre class="failureMsg">TypeError: evaluateCondition is not a function
    at Object.evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:121:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; organization resource permissions</div><div class="test-title">admin role should have permission to update organization</div><div class="test-status">passed</div><div class="test-duration">0.169s</div></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; organization resource permissions</div><div class="test-title">org admin should have permission to update organization</div><div class="test-status">failed</div><div class="test-duration">0.018s</div></div><div class="failureMessages"> <pre class="failureMsg">Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:149:22)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Organization Permissions &gt; organization resource permissions</div><div class="test-title">regular user should not have permission to update organization</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div></div><div class="suite-consolelog"><div class="suite-consolelog-header">Console Log</div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:136:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:136:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "user123",
    "role": "admin"
  },
  "resource": "organizations",
  "action": "update",
  "context": {
    "params": {
      "orgId": "org1"
    }
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:136:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:83:7)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:136:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:83:7)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:136:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_granted",
  "reason": "role_match",
  "userRole": "admin",
  "allowedRoles": [
    "admin"
  ]
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:83:7)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:136:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "admin-user",
    "role": "user"
  },
  "resource": "organizations",
  "action": "update",
  "context": {
    "params": {
      "orgId": "org1"
    }
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:29:11)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:386:5)
    at checkIsOrgAdmin (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:263:32)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">AUTH ERROR: Error checking organization admin status</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:31:13)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:386:5)
    at checkIsOrgAdmin (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:263:32)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">Details: {
  "error": "db.collection(...).where(...).where is not a function",
  "userId": "admin-user",
  "orgId": "org1"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:264:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:264:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "org_admin_check",
  "result": false,
  "userId": "admin-user",
  "orgId": "org1"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:264:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_denied",
  "reason": "no_matching_role_or_condition"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:148:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "regular-user",
    "role": "user"
  },
  "resource": "organizations",
  "action": "update",
  "context": {
    "params": {
      "orgId": "org1"
    }
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:29:11)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:386:5)
    at checkIsOrgAdmin (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:263:32)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">AUTH ERROR: Error checking organization admin status</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:31:13)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:386:5)
    at checkIsOrgAdmin (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:263:32)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">Details: {
  "error": "db.collection(...).where(...).where is not a function",
  "userId": "regular-user",
  "orgId": "org1"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:264:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:264:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "org_admin_check",
  "result": false,
  "userId": "regular-user",
  "orgId": "org1"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:264:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_denied",
  "reason": "no_matching_role_or_condition"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions/organization.test.js:160:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div></div></div><div id="suite-4" class="suite-container"><input id="collapsible-3" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-3"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js</div><div class="suite-time">2.531s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasRole function</div><div class="test-title">should return true if user has a matching role</div><div class="test-status">passed</div><div class="test-duration">0.051s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasRole function</div><div class="test-title">should return false if user does not have a matching role</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasRole function</div><div class="test-title">should default to "user" role if not specified</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasRole function</div><div class="test-title">should return true if "*" is in allowed roles</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasPermission function</div><div class="test-title">should grant access if user has a direct role</div><div class="test-status">passed</div><div class="test-duration">0.037s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasPermission function</div><div class="test-title">should grant access if user is the owner</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasPermission function</div><div class="test-title">should deny access if not owner and no matching role</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result failed"><div class="test-info"><div class="test-suitename">Permission Service &gt; hasPermission function</div><div class="test-title">should check for same organization</div><div class="test-status">failed</div><div class="test-duration">0.194s</div></div><div class="failureMessages"> <pre class="failureMsg">Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:110:22)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre></div></div></div><div class="suite-consolelog"><div class="suite-consolelog-header">Console Log</div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:62:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:62:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "user123",
    "role": "admin"
  },
  "resource": "pets",
  "action": "update",
  "context": {}
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:62:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:83:7)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:62:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:83:7)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:62:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_granted",
  "reason": "role_match",
  "userRole": "admin",
  "allowedRoles": [
    "admin",
    "moderator"
  ]
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:83:7)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:62:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "user123",
    "role": "user"
  },
  "resource": "pets",
  "action": "update",
  "context": {
    "resourceId": "pet123",
    "resourceOwnerId": "user123"
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "is_owner_check",
  "result": true,
  "userId": "user123",
  "resourceOwnerId": "user123"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:180:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:180:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "condition_met",
  "conditionType": "isOwner"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:180:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:96:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:96:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_granted",
  "reason": "condition_met"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:96:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:78:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "user123",
    "role": "user"
  },
  "resource": "pets",
  "action": "update",
  "context": {
    "resourceId": "pet123",
    "resourceOwnerId": "differentUser"
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "is_owner_check",
  "result": false,
  "userId": "user123",
  "resourceOwnerId": "differentUser"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:203:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:203:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "condition_failed",
  "reason": "required_role_not_met",
  "conditionType": "isSameOrganization",
  "requiredRole": "org-admin",
  "userRole": "user"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:203:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:203:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:203:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "condition_failed",
  "reason": "required_role_not_met",
  "conditionType": "isSameOrganization",
  "requiredRole": "org-staff",
  "userRole": "user"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:203:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_denied",
  "reason": "no_matching_role_or_condition"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:93:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_check",
  "user": {
    "uid": "user123",
    "role": "org-admin"
  },
  "resource": "pets",
  "action": "delete",
  "context": {
    "resourceId": "pet123",
    "resourceOwnerId": "differentUser"
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:56:5)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">{
  "type": "is_owner_check",
  "result": false,
  "userId": "user123",
  "resourceOwnerId": "differentUser"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:221:7)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:29)
    at Object.hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:28)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:252:3)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:126:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:29:11)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:520:5)
    at getUserOrganizations (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:350:26)
    at checkSameOrganization (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:242:31)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">AUTH ERROR: Error getting user organizations</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:31:13)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:520:5)
    at getUserOrganizations (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:350:26)
    at checkSameOrganization (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:242:31)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:32)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">Details: {
  "error": "db.collection(...).where is not a function",
  "userId": "user123"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:29:11)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:520:5)
    at getUserOrganizations (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:351:35)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:242:25)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">AUTH ERROR: Error getting user organizations</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at error (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:31:13)
    at logAuthError (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:520:5)
    at getUserOrganizations (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:351:35)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at evaluateCondition (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:242:25)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">Details: {
  "error": "db.collection(...).where is not a function",
  "userId": "differentUser"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:243:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:243:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "same_organization_check",
  "result": false,
  "userId": "user123",
  "resourceOwnerId": "differentUser"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:243:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at meetsConditions (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:178:26)
    at hasPermission (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:93:23)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:16:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">=== AUTH DEBUG ===</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:17:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">{
  "type": "permission_denied",
  "reason": "no_matching_role_or_condition"
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/utils/loggerUtil.js:18:13)
    at logAuthDebug (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/services/permissionService.js:101:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/permissions.test.js:109:22)</pre><pre class="suite-consolelog-item-message">=== END AUTH DEBUG ===</pre></div></div></div><div id="suite-5" class="suite-container"><input id="collapsible-4" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-4"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/unit/middlewareComposition.test.js</div><div class="suite-time">0.894s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; requireAuth</div><div class="test-title">should return verifyToken middleware</div><div class="test-status">passed</div><div class="test-duration">0.341s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; protectResource</div><div class="test-title">should return correct middleware chain for pets</div><div class="test-status">passed</div><div class="test-duration">0.039s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; protectResource</div><div class="test-title">should return correct middleware chain for users</div><div class="test-status">passed</div><div class="test-duration">0.013s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; protectResource</div><div class="test-title">should return correct middleware chain for organizations</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; protectResource</div><div class="test-title">should skip resource loading when option is passed</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; protectResource</div><div class="test-title">should throw error for unsupported resource type</div><div class="test-status">passed</div><div class="test-duration">0.051s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; protectCollection</div><div class="test-title">should return correct middleware chain</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; requireRole</div><div class="test-title">should return correct middleware chain for single role</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; requireRole</div><div class="test-title">should handle array of roles</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; requireAdmin</div><div class="test-title">should be a convenience method for requiring admin role</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; requireOrgAdmin</div><div class="test-title">should return correct middleware chain</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; ownerOrAdmin</div><div class="test-title">should return correct middleware chain for pets</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Middleware Composition &gt; ownerOrAdmin</div><div class="test-title">should throw error for unsupported resource type</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div></div></div><div id="suite-6" class="suite-container"><input id="collapsible-5" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-5"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/unit/resourceLoaders.test.js</div><div class="suite-time">0.948s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadPetResource</div><div class="test-title">should load pet resource and call next</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadPetResource</div><div class="test-title">should return 404 if pet is not found</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadPetResource</div><div class="test-title">should return 500 for other errors</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadUserResource</div><div class="test-title">should load user resource and call next</div><div class="test-status">passed</div><div class="test-duration">0.009s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadUserResource</div><div class="test-title">should return 404 if user is not found</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadUserResource</div><div class="test-title">should return 500 for other errors</div><div class="test-status">passed</div><div class="test-duration">0.356s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadOrganizationResource</div><div class="test-title">should load organization resource and call next</div><div class="test-status">passed</div><div class="test-duration">0.012s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; loadOrganizationResource</div><div class="test-title">should return 404 if organization is not found</div><div class="test-status">passed</div><div class="test-duration">0.024s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; createResourceLoader</div><div class="test-title">should create a resource loader middleware that works correctly</div><div class="test-status">passed</div><div class="test-duration">0.013s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Resource Loaders Middleware &gt; createResourceLoader</div><div class="test-title">should handle missing ID parameter</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div></div></div><div id="suite-7" class="suite-container"><input id="collapsible-6" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-6"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/integration/auth-system.test.js</div><div class="suite-time">0s</div></div></label><div class="suite-tests"/></div><div id="suite-8" class="suite-container"><input id="collapsible-7" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-7"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js</div><div class="suite-time warn">12.329s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Registration</div><div class="test-title">should successfully register a new user with valid data</div><div class="test-status">passed</div><div class="test-duration">1.124s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Registration</div><div class="test-title">should reject registration with invalid email format</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Registration</div><div class="test-title">should reject registration with weak password</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Registration</div><div class="test-title">should reject registration with missing required fields</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Login</div><div class="test-title">should successfully login with valid credentials</div><div class="test-status">passed</div><div class="test-duration">0.317s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Login</div><div class="test-title">should reject login with invalid password</div><div class="test-status">passed</div><div class="test-duration">0.289s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Login</div><div class="test-title">should reject login with non-existent user</div><div class="test-status">passed</div><div class="test-duration">0.091s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Login</div><div class="test-title">should reject login with invalid email format</div><div class="test-status">passed</div><div class="test-duration">0.011s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; User Login</div><div class="test-title">should reject login with disabled account</div><div class="test-status">passed</div><div class="test-duration">2.283s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Password Reset</div><div class="test-title">should successfully request password reset for valid email</div><div class="test-status">passed</div><div class="test-duration">0.406s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Email Verification</div><div class="test-title">should successfully verify email with valid token</div><div class="test-status">passed</div><div class="test-duration">0.005s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Email Verification</div><div class="test-title">should reject verification with invalid token</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Email Verification</div><div class="test-title">should reject verification with expired token</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Logout</div><div class="test-title">should successfully logout with valid token</div><div class="test-status">passed</div><div class="test-duration">0.07s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Logout</div><div class="test-title">should reject logout with invalid token</div><div class="test-status">passed</div><div class="test-duration">0.005s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Authentication Endpoints &gt; Logout</div><div class="test-title">should reject logout without token</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div></div><div class="suite-consolelog"><div class="suite-consolelog-header">Console Log</div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:120:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Register with valid data</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:120:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: {
    email: 'test1746454486109@example.com',
    password: 'Test123456!',
    name: 'Test User'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:120:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 201,
  data: {
    message: 'Usuario registrado correctamente',
    user: {
      id: 'PKuk92Vx0ZYr5Dn7V3TnSwmW7al2',
      email: 'test1746454486109@example.com',
      name: 'Test User',
      role: 'user'
    },
    tokens: {
      idToken: 'eyJhbGciOiJSUzI1NiIsImtpZCI6IjNmOWEwNTBkYzRhZTgyOGMyODcxYzMyNTYzYzk5ZDUwMjc3ODRiZTUiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0NjQ1NDQ4NiwidXNlcl9pZCI6IlBLdWs5MlZ4MFpZcjVEbjdWM1RuU3dtVzdhbDIiLCJzdWIiOiJQS3VrOTJWeDBaWXI1RG43VjNUblN3bVc3YWwyIiwiaWF0IjoxNzQ2NDU0NDg2LCJleHAiOjE3NDY0NTgwODYsImVtYWlsIjoidGVzdDE3NDY0NTQ0ODYxMDlAZXhhbXBsZS5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsidGVzdDE3NDY0NTQ0ODYxMDlAZXhhbXBsZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.g01PnSGGbC27Sgx_SWW5L7i25hyzYUn5HRR6Pl1wh5UKBfORpyJ662M1aKgSK54wYBf0_VNWKEW8zLrDxjxxHIMxqptcNkcfj28hOgC3jFdyJsxsObJhtDCjk0voi27R4vRzUmhcY-PByhi5bCIA_N5Pbq-SZ_ZnCCWsKuu5zrk995JJ2mcwfbVbRzGnGOPV8RS3oNQ0adClEqeTP_GzmsJ0OA6spddW4oNLYJ2LBocSjw1mdtEog_d3CZmZwDzPMZV3qS7xqkUK86pUgK4cfVv3P2eHGL7shsDb8ZHTLuGQ2yow09DiDzFuueTKgEhagCQckFzpug-Rl5EdNecAPw',
      refreshToken: 'AMf-vBxm0dVHuADbmSusTJ41HTzqRT8-ClJSdhhRCHKSkTZiTTYwtx1EUxepcxToZpEuLBF7Ppm-P1ZFFqpriEe3bnmDcUIrKsQ7sneDJe52BTBcYB36f8SIJwhqXgslowc839r4oMG0bLCzojAx71-5bdazpulsHcfxUtcjmNfKLEOLCoMNpcPRLOmsVsCdCZJRUA7WrUGtpxcUzs7iVi4qSZTbMcudRRXJ8Ld20Ye2z-Dek4LeYPY',
      expiresIn: '3600'
    }
  },
  requestData: {
    email: 'test1746454486109@example.com',
    password: 'Test123456!',
    name: 'Test User'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:134:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Register with invalid email</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:134:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: {
    email: 'invalid-email',
    password: 'Test123456!',
    name: 'Test User'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:134:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Formato de email inválido' },
  requestData: {
    email: 'invalid-email',
    password: 'Test123456!',
    name: 'Test User'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:146:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Register with weak password</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:146:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: {
    email: 'test1746454487231@example.com',
    password: '123',
    name: 'Test User'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:146:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'La contraseña debe tener al menos 6 caracteres' },
  requestData: {
    email: 'test1746454487231@example.com',
    password: '123',
    name: 'Test User'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:156:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Register with missing fields</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:156:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { email: 'test1746454487238@example.com' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:156:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Se requieren todos los campos: email, password y name' },
  requestData: { email: 'test1746454487238@example.com' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:171:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Login with valid credentials</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:171:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { email: 'test1746454484076@example.com', password: 'Test123456!' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:171:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    user: {
      id: 'HqPWOH639gfeTzbGZBp80RgvQDB2',
      email: 'test1746454484076@example.com',
      name: 'Test User',
      role: 'user',
      emailVerified: false,
      createdAt: [Object]
    },
    tokens: {
      idToken: 'eyJhbGciOiJSUzI1NiIsImtpZCI6IjNmOWEwNTBkYzRhZTgyOGMyODcxYzMyNTYzYzk5ZDUwMjc3ODRiZTUiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vcGV0LWFwaS1kZXYtMzUxMTUiLCJhdWQiOiJwZXQtYXBpLWRldi0zNTExNSIsImF1dGhfdGltZSI6MTc0NjQ1NDQ4NywidXNlcl9pZCI6IkhxUFdPSDYzOWdmZVR6YkdaQnA4MFJndlFEQjIiLCJzdWIiOiJIcVBXT0g2MzlnZmVUemJHWkJwODBSZ3ZRREIyIiwiaWF0IjoxNzQ2NDU0NDg3LCJleHAiOjE3NDY0NTgwODcsImVtYWlsIjoidGVzdDE3NDY0NTQ0ODQwNzZAZXhhbXBsZS5jb20iLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsidGVzdDE3NDY0NTQ0ODQwNzZAZXhhbXBsZS5jb20iXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.UojBpxH1OMIa_u3QoPf-rd2XSTtYogP0svcxLiZUVQy4TWkFxBHoMJAiSGxBQtMUgz447mTICfcSdDzc1y5EioJ59-xtRNIQTZJCR8qhWpnhHm2gqLfpqgNSzK34kx7AqYQBpv7uJbDWr31vfVn0CovzvWyvcuQU-TkhPpEDa2TPNSv9vy-xyRxXH0lgkUc06FCOGcZTD-Wld1zx0CVFKgX4gnN0Y2sddeMd3YvTstulX1UyH8U_e41OGR7AqCgFX6n5kd3mvD_9FKRho78Ndwm6iSTdLwlGMNW5JpBfWrbJ2IdFGaQD5u7VngQZFTI9IfcbZEcHREfkqL3JLXSNJg',
      refreshToken: 'AMf-vBzTFtPvGvWUoQZJbzP1HvfSN1CHf9bJZXYwpbz5wUyLnVzaN2PrVI2H7e9XYtLWLjxXOhq5pcnUKffuKp77pKsZcL7p-YdAoSo2e3516TmTLHqGK1nbj915Tgqiy4UVCt04vsOqfLm2uGDNR4cvZiBZendfvrHR5fsnMKmZexdRhlsfyLQDVRbb8IGYgWrM1Nx6PqRL4gqW7M2Ng1qF72NnWY9bjQ7MUMPthtU50iq_4TtMGF4',
      expiresIn: '3600'
    }
  },
  requestData: { email: 'test1746454484076@example.com', password: 'Test123456!' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:183:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Login with invalid password</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:183:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { email: 'test1746454484076@example.com', password: 'wrongpassword' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:183:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: {
    error: 'Error de autenticación',
    details: 'INVALID_LOGIN_CREDENTIALS'
  },
  requestData: { email: 'test1746454484076@example.com', password: 'wrongpassword' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:195:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Login with non-existent user</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:195:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: {
    email: 'nonexistent1746454487851@example.com',
    password: 'Test123456!'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:195:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Error de autenticación', details: 'USER_NOT_FOUND' },
  requestData: {
    email: 'nonexistent1746454487851@example.com',
    password: 'Test123456!'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:207:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Login with invalid email</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:207:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { email: 'invalid-email-format', password: 'Test123456!' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:207:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Formato de email inválido' },
  requestData: { email: 'invalid-email-format', password: 'Test123456!' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:232:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Login with disabled account</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:232:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: {
    email: 'disabled1746454487954@example.com',
    password: 'Test123456!'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:232:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: { error: 'Cuenta deshabilitada', details: 'USER_DISABLED' },
  requestData: {
    email: 'disabled1746454487954@example.com',
    password: 'Test123456!'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:247:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Request password reset with valid email</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:247:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { email: 'test1746454484076@example.com' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:247:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: { message: 'Correo de recuperación enviado correctamente' },
  requestData: { email: 'test1746454484076@example.com' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:261:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Verify with valid token</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:261:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { token: 'valid-token-123' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:261:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: { message: 'Email verificado correctamente' },
  requestData: { token: 'valid-token-123' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:271:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Verify with invalid token</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:271:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { token: 'invalid-token-123' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:271:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Token de verificación inválido' },
  requestData: { token: 'invalid-token-123' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:281:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Verify with expired token</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:281:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'Unknown',
  endpoint: 'Unknown',
  data: { token: 'expired-token-123' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:281:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Token de verificación expirado' },
  requestData: { token: 'expired-token-123' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:302:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Logout with valid token</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:302:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: { method: 'Unknown', endpoint: 'Unknown', data: null }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:302:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: { message: 'Sesión cerrada correctamente' },
  requestData: null
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:309:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Logout with invalid token</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:309:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: { method: 'Unknown', endpoint: 'Unknown', data: null }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:309:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: { status: 401, data: { error: 'Token inválido' }, requestData: null }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:61:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:316:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Logout without token</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:62:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:316:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: { method: 'Unknown', endpoint: 'Unknown', data: null }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:67:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:316:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 401,
  data: { error: 'Token no proporcionado' },
  requestData: null
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/utils.js:136:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:107:5)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:154:7)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">Deduplicating results: 16 -&gt; 16</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/utils.js:229:11)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/auth.test.js:107:5)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:154:7)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">
Markdown report generated at: /Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/auth/reports/auth_tests_2025-05-05T14-14-51-128Z.md</pre></div></div></div><div id="suite-9" class="suite-container"><input id="collapsible-8" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-8"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js</div><div class="suite-time warn">12.948s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Creación de Usuario</div><div class="test-title">debería crear un usuario con datos válidos</div><div class="test-status">passed</div><div class="test-duration">0.029s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Creación de Usuario</div><div class="test-title">debería fallar si se intenta crear un usuario con datos incompletos</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Creación de Usuario</div><div class="test-title">debería fallar si un usuario sin permisos intenta crear otro usuario</div><div class="test-status">passed</div><div class="test-duration">0.014s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Obtención de Usuarios</div><div class="test-title">debería obtener una lista de usuarios como administrador</div><div class="test-status">passed</div><div class="test-duration">0.004s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Obtención de Usuarios</div><div class="test-title">debería filtrar usuarios por rol</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Obtención de Usuarios</div><div class="test-title">debería obtener un usuario específico por ID</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Obtención de Usuarios</div><div class="test-title">debería permitir a un usuario obtener su propio perfil</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Obtención de Usuarios</div><div class="test-title">debería fallar si un usuario intenta acceder al perfil de otro sin permisos</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Actualización de Usuario</div><div class="test-title">debería actualizar datos de un usuario como administrador</div><div class="test-status">passed</div><div class="test-duration">0.007s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Actualización de Usuario</div><div class="test-title">debería permitir a un usuario actualizar su propio perfil</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Actualización de Usuario</div><div class="test-title">debería fallar si un usuario intenta actualizar a otro sin permisos</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Bloqueo de Usuarios</div><div class="test-title">debería permitir a un usuario bloquear a otro</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Bloqueo de Usuarios</div><div class="test-title">debería permitir a un usuario desbloquear a otro</div><div class="test-status">passed</div><div class="test-duration">0.009s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Organizaciones de Usuario</div><div class="test-title">debería permitir a un usuario ver sus propias organizaciones</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Organizaciones de Usuario</div><div class="test-title">debería permitir a un administrador ver las organizaciones de cualquier usuario</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Organizaciones de Usuario</div><div class="test-title">debería fallar si un usuario intenta ver las organizaciones de otro sin permisos</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Eliminación de Usuario</div><div class="test-title">debería fallar si un usuario regular intenta eliminar a otro</div><div class="test-status">passed</div><div class="test-duration">0.002s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Módulo de Usuarios &gt; Eliminación de Usuario</div><div class="test-title">debería permitir a un administrador eliminar un usuario</div><div class="test-status">passed</div><div class="test-duration">0.001s</div></div></div></div><div class="suite-consolelog"><div class="suite-consolelog-header">Console Log</div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:60:15)
    at Runtime._execModule (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runtime/build/index.js:1439:24)
    at Runtime._loadModule (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runtime/build/index.js:1022:12)
    at Runtime.requireModule (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runtime/build/index.js:882:12)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:77:13)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">Firebase Admin SDK inicializado correctamente</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:220:13)</pre><pre class="suite-consolelog-item-message">Test setup complete with users: 3</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:281:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Crear usuario con datos válidos</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:281:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'users',
  data: {
    name: 'Nuevo Usuario',
    email: 'nuevo.usuario7863@example.com',
    role: 'user'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:281:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 201,
  data: {
    name: 'Nuevo Usuario',
    email: 'nuevo.usuario7863@example.com',
    role: 'user',
    id: '00263b33-b9c9-4d5a-bd98-36aeaa95617d'
  },
  endpoint: 'users',
  method: 'POST',
  requestData: {
    name: 'Nuevo Usuario',
    email: 'nuevo.usuario7863@example.com',
    role: 'user'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:323:9)</pre><pre class="suite-consolelog-item-message">
Test Case: Crear usuario con datos incompletos</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:323:9)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'users',
  data: { name: 'Usuario Incompleto' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:323:9)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Email is required' },
  endpoint: 'users',
  method: 'POST',
  requestData: { name: 'Usuario Incompleto' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:361:9)</pre><pre class="suite-consolelog-item-message">
Test Case: Crear usuario con permisos insuficientes</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:361:9)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'users',
  data: {
    name: 'Usuario Prohibido',
    email: 'usuario.prohibido3996@example.com',
    role: 'user'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:361:9)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: { error: 'Permission denied' },
  endpoint: 'users',
  method: 'POST',
  requestData: {
    name: 'Usuario Prohibido',
    email: 'usuario.prohibido3996@example.com',
    role: 'user'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:390:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Obtener lista de usuarios como administrador</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:390:7)</pre><pre class="suite-consolelog-item-message">Request: { method: 'GET', endpoint: 'users', data: undefined }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:390:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [
    {
      id: 'DfMvkTTRbwP3bpo591KauRgAz1W2',
      name: 'Test User 2261',
      email: 'test.user2261@example.com',
      role: 'user'
    },
    {
      id: '9Sh2r8jcNWfl4L7q4ZSo2ISzaA83',
      name: 'Test User 6802',
      email: 'test.user6802@example.com',
      role: 'moderator'
    },
    {
      id: 'roMzwrsUqEYUy9xCTh56Ewm4DKR2',
      name: 'Test User 5221',
      email: 'test.user5221@example.com',
      role: 'admin'
    },
    {
      name: 'Nuevo Usuario',
      email: 'nuevo.usuario7863@example.com',
      role: 'user',
      id: '00263b33-b9c9-4d5a-bd98-36aeaa95617d'
    }
  ],
  endpoint: 'users',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:416:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Filtrar usuarios por rol admin</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:416:7)</pre><pre class="suite-consolelog-item-message">Request: { method: 'GET', endpoint: 'users?role=admin', data: undefined }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:416:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [
    {
      id: 'roMzwrsUqEYUy9xCTh56Ewm4DKR2',
      name: 'Test User 5221',
      email: 'test.user5221@example.com',
      role: 'admin'
    }
  ],
  endpoint: 'users?role=admin',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:448:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Obtener usuario por ID DfMvkTTRbwP3bpo591KauRgAz1W2</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:448:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:448:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    id: 'DfMvkTTRbwP3bpo591KauRgAz1W2',
    name: 'Test User 2261',
    email: 'test.user2261@example.com',
    role: 'user'
  },
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:475:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Obtener propio perfil de usuario</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:475:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:475:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    id: 'DfMvkTTRbwP3bpo591KauRgAz1W2',
    name: 'Test User 2261',
    email: 'test.user2261@example.com',
    role: 'user'
  },
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:511:11)</pre><pre class="suite-consolelog-item-message">
Test Case: Acceder al perfil de otro usuario sin permisos</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:511:11)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'users/00263b33-b9c9-4d5a-bd98-36aeaa95617d',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:511:11)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: { error: 'Forbidden: You can only view your own profile' },
  endpoint: 'users/00263b33-b9c9-4d5a-bd98-36aeaa95617d',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:555:9)</pre><pre class="suite-consolelog-item-message">
Test Case: Actualizar usuario DfMvkTTRbwP3bpo591KauRgAz1W2 como administrador</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:555:9)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'PUT',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  data: { name: 'Updated Name 722' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:555:9)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    id: 'DfMvkTTRbwP3bpo591KauRgAz1W2',
    name: 'Updated Name 722',
    email: 'test.user2261@example.com',
    role: 'user'
  },
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  method: 'PUT',
  requestData: { name: 'Updated Name 722' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:595:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Actualizar propio perfil de usuario</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:595:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'PUT',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  data: { name: 'Self Updated 738' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:595:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    id: 'DfMvkTTRbwP3bpo591KauRgAz1W2',
    name: 'Self Updated 738',
    email: 'test.user2261@example.com',
    role: 'user'
  },
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2',
  method: 'PUT',
  requestData: { name: 'Self Updated 738' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:637:11)</pre><pre class="suite-consolelog-item-message">
Test Case: Actualizar otro usuario sin permisos</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:637:11)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'PUT',
  endpoint: 'users/00263b33-b9c9-4d5a-bd98-36aeaa95617d',
  data: { name: 'Unauthorized Update' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:637:11)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: { error: 'Forbidden: You can only update your own profile' },
  endpoint: 'users/00263b33-b9c9-4d5a-bd98-36aeaa95617d',
  method: 'PUT',
  requestData: { name: 'Unauthorized Update' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:679:9)</pre><pre class="suite-consolelog-item-message">
Test Case: Bloquear usuario</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:679:9)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/block',
  data: { blockedUserId: '00263b33-b9c9-4d5a-bd98-36aeaa95617d' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:679:9)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    message: 'User 00263b33-b9c9-4d5a-bd98-36aeaa95617d blocked by DfMvkTTRbwP3bpo591KauRgAz1W2'
  },
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/block',
  method: 'POST',
  requestData: { blockedUserId: '00263b33-b9c9-4d5a-bd98-36aeaa95617d' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:718:9)</pre><pre class="suite-consolelog-item-message">
Test Case: Desbloquear usuario</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:718:9)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/unblock',
  data: { blockedUserId: '00263b33-b9c9-4d5a-bd98-36aeaa95617d' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:718:9)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    message: 'User 00263b33-b9c9-4d5a-bd98-36aeaa95617d unblocked by DfMvkTTRbwP3bpo591KauRgAz1W2'
  },
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/unblock',
  method: 'POST',
  requestData: { blockedUserId: '00263b33-b9c9-4d5a-bd98-36aeaa95617d' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:751:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Obtener organizaciones propias</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:751:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:751:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [],
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:778:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Administrador ve organizaciones de otro usuario</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:778:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:778:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [],
  endpoint: 'users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:812:11)</pre><pre class="suite-consolelog-item-message">
Test Case: Ver organizaciones de otro usuario sin permisos</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:812:11)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'users/00263b33-b9c9-4d5a-bd98-36aeaa95617d/organizations',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:812:11)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: { error: 'Forbidden: You can only view your own organizations' },
  endpoint: 'users/00263b33-b9c9-4d5a-bd98-36aeaa95617d/organizations',
  method: 'GET'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:859:9)</pre><pre class="suite-consolelog-item-message">
Test Case: Eliminar otro usuario sin permisos de administrador</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:859:9)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'DELETE',
  endpoint: 'users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:859:9)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: { error: 'Forbidden: Only admins can delete other users' },
  endpoint: 'users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2',
  method: 'DELETE'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:87:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:885:7)</pre><pre class="suite-consolelog-item-message">
Test Case: Eliminar usuario como administrador</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:88:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:885:7)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'DELETE',
  endpoint: 'users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2',
  data: undefined
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:93:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:885:7)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: { message: 'User yUO6PBTiKgbgLSYG8UYEieJzRzQ2 deleted successfully' },
  endpoint: 'users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2',
  method: 'DELETE'
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/utils.js:136:11)
    at Object.generateReport (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:236:3)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:154:7)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">Deduplicating results: 18 -&gt; 18</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/utils.js:229:11)
    at Object.generateReport (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:236:3)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:281:40)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:154:7)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">
Markdown report generated at: /Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/reports/users_tests_2025-05-05T14-14-50-209Z.md</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:180:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at Object.&lt;anonymous&gt; (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/users/users.test.js:238:3)</pre><pre class="suite-consolelog-item-message">Note: Auth user 00263b33-b9c9-4d5a-bd98-36aeaa95617d could not be deleted: There is no user record corresponding to the provided identifier.</pre></div></div></div><div id="suite-10" class="suite-container"><input id="collapsible-9" type="checkbox" class="toggle" checked="checked"/><label for="collapsible-9"><div class="suite-info"><div class="suite-path">/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js</div><div class="suite-time warn">14.929s</div></div></label><div class="suite-tests"><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Creation</div><div class="test-title">should successfully create a pet with valid data</div><div class="test-status">passed</div><div class="test-duration">1.206s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Creation</div><div class="test-title">should reject pet creation with missing required fields</div><div class="test-status">passed</div><div class="test-duration">0.149s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Creation</div><div class="test-title">should reject pet creation with invalid data types</div><div class="test-status">passed</div><div class="test-duration">0.075s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Creation</div><div class="test-title">should reject pet creation for unauthorized user</div><div class="test-status">passed</div><div class="test-duration">0.008s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Retrieval (Single)</div><div class="test-title">should retrieve an existing pet with valid ID</div><div class="test-status">passed</div><div class="test-duration">0.092s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Retrieval (Single)</div><div class="test-title">should fail to retrieve pet with invalid ID format</div><div class="test-status">passed</div><div class="test-duration">0.009s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Retrieval (Single)</div><div class="test-title">should fail to retrieve non-existent pet</div><div class="test-status">passed</div><div class="test-duration">0.092s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Listing</div><div class="test-title">should list all pets with pagination</div><div class="test-status">passed</div><div class="test-duration">0.095s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Listing</div><div class="test-title">should filter pets by species</div><div class="test-status">passed</div><div class="test-duration">0.086s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Listing</div><div class="test-title">should sort pets by name</div><div class="test-status">passed</div><div class="test-duration">0.1s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Update</div><div class="test-title">should update pet with valid data</div><div class="test-status">passed</div><div class="test-duration">0.312s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Update</div><div class="test-title">should reject update with invalid data</div><div class="test-status">passed</div><div class="test-duration">0.147s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Update</div><div class="test-title">should reject update by unauthorized user</div><div class="test-status">passed</div><div class="test-duration">0.126s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Deletion</div><div class="test-title">should delete pet with valid ID</div><div class="test-status">passed</div><div class="test-duration">0.294s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Deletion</div><div class="test-title">should reject deletion with invalid ID format</div><div class="test-status">passed</div><div class="test-duration">0.003s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Deletion</div><div class="test-title">should reject deletion by unauthorized user</div><div class="test-status">passed</div><div class="test-duration">0.13s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Search</div><div class="test-title">should search pets by name</div><div class="test-status">passed</div><div class="test-duration">0.07s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Search</div><div class="test-title">should search pets by species</div><div class="test-status">passed</div><div class="test-duration">0.096s</div></div></div><div class="test-result passed"><div class="test-info"><div class="test-suitename">Pet Management Endpoints &gt; Pet Search</div><div class="test-title">should handle search with no results</div><div class="test-status">passed</div><div class="test-duration">0.075s</div></div></div></div><div class="suite-consolelog"><div class="suite-consolelog-header">Console Log</div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:224:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Create pet with valid data</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:224:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'pets',
  data: {
    name: 'Fluffy',
    species: 'Dog',
    breed: 'Golden Retriever',
    age: 3,
    status: 'available',
    description: 'Friendly and playful golden retriever',
    medicalHistory: 'All vaccinations up to date',
    images: [ 'https://dummyimage.com/300x200/ff9900/ffffff&amp;text=Pet%2BImage' ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:224:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 201,
  data: {
    name: 'Fluffy',
    species: 'Dog',
    breed: 'Golden Retriever',
    age: 3,
    status: 'available',
    description: 'Friendly and playful golden retriever',
    medicalHistory: 'All vaccinations up to date',
    images: [
      'https://storage.googleapis.com/pet-api-dev-35115.firebasestorage.app/pets/1746454489699_js2u15.png'
    ],
    userId: 'warlaXuYzrTbqkJvzAX612zJlO02',
    id: '3a3d9374-6096-40a9-b9b9-617943e100a4',
    createdAt: { _seconds: 1746454490, _nanoseconds: 577000000 },
    updatedAt: { _seconds: 1746454490, _nanoseconds: 577000000 }
  },
  endpoint: 'pets',
  method: 'POST',
  requestData: {
    name: 'Fluffy',
    species: 'Dog',
    breed: 'Golden Retriever',
    age: 3,
    status: 'available',
    description: 'Friendly and playful golden retriever',
    medicalHistory: 'All vaccinations up to date',
    images: [ 'https://dummyimage.com/300x200/ff9900/ffffff&amp;text=Pet%2BImage' ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:232:17)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Successfully created test pet with ID: 3a3d9374-6096-40a9-b9b9-617943e100a4</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:249:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Create pet with missing required fields</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:249:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'pets',
  data: {
    breed: 'Siamese',
    age: 2,
    status: 'available',
    images: [ 'https://dummyimage.com/300x200/9900ff/ffffff&amp;text=Cat%2BImage' ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:249:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: {
    error: 'Validation failed',
    details: [ [Object], [Object], [Object], [Object] ]
  },
  endpoint: 'pets',
  method: 'POST',
  requestData: {
    breed: 'Siamese',
    age: 2,
    status: 'available',
    images: [ 'https://dummyimage.com/300x200/9900ff/ffffff&amp;text=Cat%2BImage' ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:275:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Create pet with invalid data types</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:275:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'pets',
  data: {
    name: 'Max',
    species: 'Dog',
    breed: 'German Shepherd',
    age: 'not a number',
    status: 'available',
    images: [ 'https://dummyimage.com/300x200/0099ff/ffffff&amp;text=Dog%2BImage' ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:275:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Validation failed', details: [ [Object] ] },
  endpoint: 'pets',
  method: 'POST',
  requestData: {
    name: 'Max',
    species: 'Dog',
    breed: 'German Shepherd',
    age: 'not a number',
    status: 'available',
    images: [ 'https://dummyimage.com/300x200/0099ff/ffffff&amp;text=Dog%2BImage' ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:301:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Create pet with unauthorized user</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:301:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'POST',
  endpoint: 'pets',
  data: {
    name: 'Rex',
    species: 'Dog',
    breed: 'Labrador',
    age: 4,
    status: 'available',
    images: [
      'https://dummyimage.com/300x200/009900/ffffff&amp;text=Labrador%2BImage'
    ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:301:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 401,
  data: { error: 'Token no proporcionado' },
  endpoint: 'pets',
  method: 'POST',
  requestData: {
    name: 'Rex',
    species: 'Dog',
    breed: 'Labrador',
    age: 4,
    status: 'available',
    images: [
      'https://dummyimage.com/300x200/009900/ffffff&amp;text=Labrador%2BImage'
    ]
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:320:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Retrieve existing pet with valid ID</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:320:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  data: { petId: '3a3d9374-6096-40a9-b9b9-617943e100a4' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:320:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    name: 'Fluffy',
    species: 'Dog',
    breed: 'Golden Retriever',
    age: 3,
    status: 'available',
    description: 'Friendly and playful golden retriever',
    medicalHistory: 'All vaccinations up to date',
    images: [
      'https://storage.googleapis.com/pet-api-dev-35115.firebasestorage.app/pets/1746454489699_js2u15.png'
    ],
    userId: 'warlaXuYzrTbqkJvzAX612zJlO02',
    id: '3a3d9374-6096-40a9-b9b9-617943e100a4',
    createdAt: { _seconds: 1746454490, _nanoseconds: 577000000 },
    updatedAt: { _seconds: 1746454490, _nanoseconds: 577000000 }
  },
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  method: 'GET',
  requestData: { petId: '3a3d9374-6096-40a9-b9b9-617943e100a4' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.warn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:325:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">NOTE: API returns pet directly instead of in a pet property</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:333:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Retrieve pet with invalid ID format</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:333:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets/not-a-valid-id',
  data: { petId: 'not-a-valid-id' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:333:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Invalid pet ID', details: [ [Object] ] },
  endpoint: 'pets/not-a-valid-id',
  method: 'GET',
  requestData: { petId: 'not-a-valid-id' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:347:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Retrieve non-existent pet</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:347:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets/12345678-1234-1234-1234-123456789012',
  data: { petId: '12345678-1234-1234-1234-123456789012' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:347:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 404,
  data: { error: 'Pet not found' },
  endpoint: 'pets/12345678-1234-1234-1234-123456789012',
  method: 'GET',
  requestData: { petId: '12345678-1234-1234-1234-123456789012' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:360:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: List all pets (paginated)</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:360:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets?page=1&amp;limit=10',
  data: { page: 1, limit: 10 }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:360:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [
    {
      name: 'Marcos',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: 'f32410cb-7b14-48f7-a169-52043f128ee1',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Doggy',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: '7e11d9ab-8829-44da-8bf4-572e1c30fd82',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Tobby',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: 'a95c5879-76ec-481e-a8cc-763b70897805',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: 'bc82d311-94d3-47ac-bb62-43391d7a2ca2',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      userId: 'user123',
      id: '391e86f5-5cf6-4d47-866d-32a39686deac',
      createdAt: [Object],
      images: [Array],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: '4955e1fc-53f6-4826-93cb-a37c83449945',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-4 ',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: '9eb986df-14c0-4698-b3ef-c19aeb1c7a9f',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-5 ',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: 'be896c68-2580-4d60-a247-cc31598bc0e5',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      id: '4f7bf936-f303-4608-9769-fd9dd347bfc6',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Fluffy',
      species: 'Dog',
      breed: 'Golden Retriever',
      age: 3,
      status: 'available',
      description: 'Friendly and playful golden retriever',
      medicalHistory: 'All vaccinations up to date',
      images: [Array],
      id: '38c95903-678c-4d02-acf2-56fc73bba5b1',
      createdAt: [Object],
      updatedAt: [Object]
    }
  ],
  endpoint: 'pets?page=1&amp;limit=10',
  method: 'GET',
  requestData: { page: 1, limit: 10 }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:370:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: List pets with filtering (by species)</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:370:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets?species=Dog',
  data: { species: 'Dog' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:370:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [
    {
      name: 'Marcos',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: 'f32410cb-7b14-48f7-a169-52043f128ee1',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Doggy',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: '7e11d9ab-8829-44da-8bf4-572e1c30fd82',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Tobby',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: 'a95c5879-76ec-481e-a8cc-763b70897805',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: 'bc82d311-94d3-47ac-bb62-43391d7a2ca2',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      userId: 'user123',
      id: '391e86f5-5cf6-4d47-866d-32a39686deac',
      createdAt: [Object],
      images: [Array],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: '4955e1fc-53f6-4826-93cb-a37c83449945',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-4 ',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: '9eb986df-14c0-4698-b3ef-c19aeb1c7a9f',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-5 ',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: 'be896c68-2580-4d60-a247-cc31598bc0e5',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      id: '4f7bf936-f303-4608-9769-fd9dd347bfc6',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Fluffy',
      species: 'Dog',
      breed: 'Golden Retriever',
      age: 3,
      status: 'available',
      description: 'Friendly and playful golden retriever',
      medicalHistory: 'All vaccinations up to date',
      images: [Array],
      id: '38c95903-678c-4d02-acf2-56fc73bba5b1',
      createdAt: [Object],
      updatedAt: [Object]
    }
  ],
  endpoint: 'pets?species=Dog',
  method: 'GET',
  requestData: { species: 'Dog' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.warn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:379:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">CRITICAL: API filtering is not working correctly - pets with species other than "Dog" are returned</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:391:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: List pets with sorting (by name)</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:391:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: { method: 'GET', endpoint: 'pets?sort=name', data: { sort: 'name' } }</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:391:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: [
    {
      name: 'Buddy',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'ipfuAjBzv7WAGK1ASJ2dlxI0RI73',
      id: '147ffe08-883c-4706-9e9e-da2061a071f9',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      id: '4f7bf936-f303-4608-9769-fd9dd347bfc6',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Max',
      species: 'Dog',
      breed: 'German Shepherd',
      age: 'not a number',
      status: 'available',
      images: [Array],
      id: '04f2ad4f-33ed-4582-b146-3de0c766e182',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      breed: 'Siamese',
      age: 2,
      status: 'available',
      images: [Array],
      id: '1cd61171-2f6c-4164-8586-8561b468b15e',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      userId: 'user123',
      id: '391e86f5-5cf6-4d47-866d-32a39686deac',
      createdAt: [Object],
      images: [Array],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: '4955e1fc-53f6-4826-93cb-a37c83449945',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-2',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: 'bc82d311-94d3-47ac-bb62-43391d7a2ca2',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-4 ',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: '9eb986df-14c0-4698-b3ef-c19aeb1c7a9f',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Buddy-5 ',
      species: 'dog',
      breed: 'Labrador',
      age: 4,
      gender: 'male',
      color: 'yellow',
      size: 'large',
      status: 'lost',
      description_en: 'Friendly and energetic',
      description_es: 'Amigable y enérgico',
      location: [Object],
      images: [Array],
      userId: 'user123',
      id: 'be896c68-2580-4d60-a247-cc31598bc0e5',
      createdAt: [Object],
      updatedAt: [Object]
    },
    {
      name: 'Doggy',
      species: 'Dog',
      breed: 'Labrador',
      age: 5,
      gender: 'Male',
      color: 'Brown',
      size: 'Large',
      status: 'lost',
      description: 'Friendly dog',
      location: [Object],
      images: [Array],
      owner: [Object],
      report: [Object],
      id: '7e11d9ab-8829-44da-8bf4-572e1c30fd82',
      createdAt: [Object],
      updatedAt: [Object]
    }
  ],
  endpoint: 'pets?sort=name',
  method: 'GET',
  requestData: { sort: 'name' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.warn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:402:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">WARNING: API does not sort pets by name parameter. Sort handling needs to be fixed in the API.</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:423:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Update pet with valid data</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:423:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'PUT',
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  data: {
    name: 'Fluffy Updated',
    description: 'Updated description for testing',
    age: 4,
    petId: '3a3d9374-6096-40a9-b9b9-617943e100a4'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:423:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    species: 'Dog',
    breed: 'Golden Retriever',
    status: 'available',
    medicalHistory: 'All vaccinations up to date',
    images: [
      'https://storage.googleapis.com/pet-api-dev-35115.firebasestorage.app/pets/1746454489699_js2u15.png'
    ],
    userId: 'warlaXuYzrTbqkJvzAX612zJlO02',
    id: '3a3d9374-6096-40a9-b9b9-617943e100a4',
    createdAt: { _seconds: 1746454490, _nanoseconds: 577000000 },
    name: 'Fluffy Updated',
    description: 'Updated description for testing',
    age: 4,
    updatedAt: { _seconds: 1746454491, _nanoseconds: 656000000 }
  },
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  method: 'PUT',
  requestData: {
    name: 'Fluffy Updated',
    description: 'Updated description for testing',
    age: 4,
    petId: '3a3d9374-6096-40a9-b9b9-617943e100a4'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at Object.warn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:430:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">NOTE: API returns the updated pet directly, not a message with pet property</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:446:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Update pet with invalid data</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:446:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'PUT',
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  data: {
    age: 'not a number',
    petId: '3a3d9374-6096-40a9-b9b9-617943e100a4'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:446:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Validation failed', details: [ [Object] ] },
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  method: 'PUT',
  requestData: {
    age: 'not a number',
    petId: '3a3d9374-6096-40a9-b9b9-617943e100a4'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:471:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Update pet as non-owner</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:471:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'PUT',
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  data: {
    name: 'Unauthorized Update',
    petId: '3a3d9374-6096-40a9-b9b9-617943e100a4'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:471:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: {
    error: 'Permission denied',
    message: "You don't have permission to update this pets"
  },
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  method: 'PUT',
  requestData: {
    name: 'Unauthorized Update',
    petId: '3a3d9374-6096-40a9-b9b9-617943e100a4'
  }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:513:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Delete pet with valid ID</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:513:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'DELETE',
  endpoint: 'pets/f9631823-9429-4026-bf19-5e74b3051e26',
  data: { petId: 'f9631823-9429-4026-bf19-5e74b3051e26' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:513:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: { message: 'Pet f9631823-9429-4026-bf19-5e74b3051e26 deleted' },
  endpoint: 'pets/f9631823-9429-4026-bf19-5e74b3051e26',
  method: 'DELETE',
  requestData: { petId: 'f9631823-9429-4026-bf19-5e74b3051e26' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:530:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Delete pet with invalid ID format</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:530:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'DELETE',
  endpoint: 'pets/not-a-valid-id',
  data: { petId: 'not-a-valid-id' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:530:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 400,
  data: { error: 'Invalid pet ID', details: [ [Object] ] },
  endpoint: 'pets/not-a-valid-id',
  method: 'DELETE',
  requestData: { petId: 'not-a-valid-id' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:547:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Delete pet as non-owner</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:547:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'DELETE',
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  data: { petId: '3a3d9374-6096-40a9-b9b9-617943e100a4' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:547:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 403,
  data: {
    error: 'Permission denied',
    message: "You don't have permission to update this pets"
  },
  endpoint: 'pets/3a3d9374-6096-40a9-b9b9-617943e100a4',
  method: 'DELETE',
  requestData: { petId: '3a3d9374-6096-40a9-b9b9-617943e100a4' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:562:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Search pets by name</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:562:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets/search?name=flu',
  data: { searchQuery: 'flu' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:562:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    results: [ [Object], [Object] ],
    pagination: { page: 1, limit: 10, total: 2, hasMore: false }
  },
  endpoint: 'pets/search?name=flu',
  method: 'GET',
  requestData: { searchQuery: 'flu' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:575:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Search pets by species</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:575:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets/search?species=Dog',
  data: { searchQuery: 'Dog' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:575:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    results: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object], [Object]
    ],
    pagination: { page: 1, limit: 10, total: 10, hasMore: true }
  },
  endpoint: 'pets/search?species=Dog',
  method: 'GET',
  requestData: { searchQuery: 'Dog' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:89:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:588:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">
Test Case: Search with no results</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:90:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:588:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Request: {
  method: 'GET',
  endpoint: 'pets/search?name=NonexistentPetName12345',
  data: { searchQuery: 'NonexistentPetName12345' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:95:11)
    at Object.trackResult (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:588:7)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)</pre><pre class="suite-consolelog-item-message">Response: {
  status: 200,
  data: {
    results: [],
    pagination: { page: 1, limit: 10, total: 0, hasMore: false }
  },
  endpoint: 'pets/search?name=NonexistentPetName12345',
  method: 'GET',
  requestData: { searchQuery: 'NonexistentPetName12345' }
}</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/utils.js:136:11)
    at Object.generateReport (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:194:5)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:154:7)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">Deduplicating results: 19 -&gt; 19</pre></div><div class="suite-consolelog-item"><pre class="suite-consolelog-item-origin">    at log (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/utils.js:229:11)
    at Object.generateReport (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/pets.test.js:194:5)
    at Promise.then.completed (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/utils.js:231:10)
    at _callCircusHook (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:154:7)
    at _runTestsForDescribeBlock (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:121:9)
    at run (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/run.js:71:3)
    at runAndTransformResultsToJestFormat (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)
    at jestAdapter (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)
    at runTestInternal (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:367:16)
    at runTest (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/runTest.js:444:34)
    at Object.worker (/Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/node_modules/jest-runner/build/testWorker.js:106:12)</pre><pre class="suite-consolelog-item-message">
Markdown report generated at: /Users/daniellovazzano/Documents/Projects/pet-api-firebase/backend/tests/pets/reports/pets_tests_2025-05-05T14-14-53-554Z.md</pre></div></div></div></div></body></html>