# Test Report - users_tests

## Environment
- Node Version: v23.11.0
- Platform: darwin
- API URL: http://localhost:3000
- Timestamp: 2025-05-05T14-14-50-209Z

## Summary
- Total Tests: 18
- Passed: 18
- Failed: 0
- Success Rate: 100.00%

## Recommendations

### SUGGESTION
API Design: Consider using GET /api/pets with query parameters for filtering and searching instead of separate search endpoints

## Endpoints Tested

### users
- Methods: POST, GET
- Total Tests: 4
- Passed: 4
- Failed: 0


### users?role=admin
- Methods: GET
- Total Tests: 1
- Passed: 1
- Failed: 0


### users/DfMvkTTRbwP3bpo591KauRgAz1W2
- Methods: GET, PUT
- Total Tests: 4
- Passed: 4
- Failed: 0


### users/00263b33-b9c9-4d5a-bd98-36aeaa95617d
- Methods: GET, PUT
- Total Tests: 2
- Passed: 2
- Failed: 0


### users/DfMvkTTRbwP3bpo591KauRgAz1W2/block
- Methods: POST
- Total Tests: 1
- Passed: 1
- Failed: 0


### users/DfMvkTTRbwP3bpo591KauRgAz1W2/unblock
- Methods: POST
- Total Tests: 1
- Passed: 1
- Failed: 0


### users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations
- Methods: GET
- Total Tests: 2
- Passed: 2
- Failed: 0


### users/00263b33-b9c9-4d5a-bd98-36aeaa95617d/organizations
- Methods: GET
- Total Tests: 1
- Passed: 1
- Failed: 0


### users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2
- Methods: DELETE
- Total Tests: 2
- Passed: 2
- Failed: 0


## Detailed Analysis

### Creación de Usuario

#### Crear usuario con datos válidos
- Status: 201
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "POST",
  "endpoint": "users",
  "data": {
    "name": "Nuevo Usuario",
    "email": "nuevo.usuario7863@example.com",
    "role": "user"
  }
}
```
- Response:
```json
{
  "status": 201,
  "data": {
    "name": "Nuevo Usuario",
    "email": "nuevo.usuario7863@example.com",
    "role": "user",
    "id": "00263b33-b9c9-4d5a-bd98-36aeaa95617d"
  }
}
```


#### Crear usuario con datos incompletos
- Status: 400
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "POST",
  "endpoint": "users",
  "data": {
    "name": "Usuario Incompleto"
  }
}
```
- Response:
```json
{
  "status": 400,
  "data": {
    "error": "Email is required"
  }
}
```


#### Crear usuario con permisos insuficientes
- Status: 403
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "POST",
  "endpoint": "users",
  "data": {
    "name": "Usuario Prohibido",
    "email": "usuario.prohibido3996@example.com",
    "role": "user"
  }
}
```
- Response:
```json
{
  "status": 403,
  "data": {
    "error": "Permission denied"
  }
}
```


#### Obtener lista de usuarios como administrador
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users"
}
```
- Response:
```json
{
  "status": 200,
  "data": [
    {
      "id": "DfMvkTTRbwP3bpo591KauRgAz1W2",
      "name": "Test User 2261",
      "email": "test.user2261@example.com",
      "role": "user"
    },
    {
      "id": "9Sh2r8jcNWfl4L7q4ZSo2ISzaA83",
      "name": "Test User 6802",
      "email": "test.user6802@example.com",
      "role": "moderator"
    },
    "[...2 more items]"
  ]
}
```


#### Filtrar usuarios por rol admin
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users?role=admin"
}
```
- Response:
```json
{
  "status": 200,
  "data": [
    {
      "id": "roMzwrsUqEYUy9xCTh56Ewm4DKR2",
      "name": "Test User 5221",
      "email": "test.user5221@example.com",
      "role": "admin"
    }
  ]
}
```


#### Obtener usuario por ID DfMvkTTRbwP3bpo591KauRgAz1W2
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2"
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "id": "DfMvkTTRbwP3bpo591KauRgAz1W2",
    "name": "Test User 2261",
    "email": "test.user2261@example.com",
    "role": "user"
  }
}
```


#### Obtener propio perfil de usuario
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2"
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "id": "DfMvkTTRbwP3bpo591KauRgAz1W2",
    "name": "Test User 2261",
    "email": "test.user2261@example.com",
    "role": "user"
  }
}
```


#### Acceder al perfil de otro usuario sin permisos
- Status: 403
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users/00263b33-b9c9-4d5a-bd98-36aeaa95617d"
}
```
- Response:
```json
{
  "status": 403,
  "data": {
    "error": "Forbidden: You can only view your own profile"
  }
}
```


#### Actualizar usuario DfMvkTTRbwP3bpo591KauRgAz1W2 como administrador
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "PUT",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2",
  "data": {
    "name": "Updated Name 722"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "id": "DfMvkTTRbwP3bpo591KauRgAz1W2",
    "name": "Updated Name 722",
    "email": "test.user2261@example.com",
    "role": "user"
  }
}
```


#### Actualizar propio perfil de usuario
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "PUT",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2",
  "data": {
    "name": "Self Updated 738"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "id": "DfMvkTTRbwP3bpo591KauRgAz1W2",
    "name": "Self Updated 738",
    "email": "test.user2261@example.com",
    "role": "user"
  }
}
```


#### Actualizar otro usuario sin permisos
- Status: 403
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "PUT",
  "endpoint": "users/00263b33-b9c9-4d5a-bd98-36aeaa95617d",
  "data": {
    "name": "Unauthorized Update"
  }
}
```
- Response:
```json
{
  "status": 403,
  "data": {
    "error": "Forbidden: You can only update your own profile"
  }
}
```


#### Bloquear usuario
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "POST",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2/block",
  "data": {
    "blockedUserId": "00263b33-b9c9-4d5a-bd98-36aeaa95617d"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "message": "User 00263b33-b9c9-4d5a-bd98-36aeaa95617d blocked by DfMvkTTRbwP3bpo591KauRgAz1W2"
  }
}
```


#### Desbloquear usuario
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "POST",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2/unblock",
  "data": {
    "blockedUserId": "00263b33-b9c9-4d5a-bd98-36aeaa95617d"
  }
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "message": "User 00263b33-b9c9-4d5a-bd98-36aeaa95617d unblocked by DfMvkTTRbwP3bpo591KauRgAz1W2"
  }
}
```


#### Administrador ve organizaciones de otro usuario
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations"
}
```
- Response:
```json
{
  "status": 200,
  "data": []
}
```


#### Ver organizaciones de otro usuario sin permisos
- Status: 403
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users/00263b33-b9c9-4d5a-bd98-36aeaa95617d/organizations"
}
```
- Response:
```json
{
  "status": 403,
  "data": {
    "error": "Forbidden: You can only view your own organizations"
  }
}
```


#### Eliminar otro usuario sin permisos de administrador
- Status: 403
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "DELETE",
  "endpoint": "users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2"
}
```
- Response:
```json
{
  "status": 403,
  "data": {
    "error": "Forbidden: Only admins can delete other users"
  }
}
```


#### Eliminar usuario como administrador
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "DELETE",
  "endpoint": "users/yUO6PBTiKgbgLSYG8UYEieJzRzQ2"
}
```
- Response:
```json
{
  "status": 200,
  "data": {
    "message": "User yUO6PBTiKgbgLSYG8UYEieJzRzQ2 deleted successfully"
  }
}
```

### Obtención de Usuarios

*No tests in this category*

### Actualización de Usuario

*No tests in this category*

### Bloqueo de Usuarios

*No tests in this category*

### Organizaciones de Usuario

#### Obtener organizaciones propias
- Status: 200
- Analysis: ✅ Test passed - API behavior matches expectations

- Request:
```json
{
  "method": "GET",
  "endpoint": "users/DfMvkTTRbwP3bpo591KauRgAz1W2/organizations"
}
```
- Response:
```json
{
  "status": 200,
  "data": []
}
```

### Eliminación de Usuario

*No tests in this category*
